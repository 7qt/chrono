{"version":3,"sources":["webpack://chrono/webpack/universalModuleDefinition","webpack://chrono/webpack/bootstrap","webpack://chrono/./node_modules/dayjs/dayjs.min.js","webpack://chrono/./src/results.ts","webpack://chrono/./src/utils/pattern.ts","webpack://chrono/./src/locales/en/constants.ts","webpack://chrono/./src/locales/en/parsers/ENTimeUnitDeadlineFormatParser.ts","webpack://chrono/./src/calculation/yearCalculation.ts","webpack://chrono/./src/locales/en/parsers/ENMonthNameLittleEndianParser.ts","webpack://chrono/./src/locales/en/parsers/ENMonthNameMiddleEndianParser.ts","webpack://chrono/./src/locales/en/parsers/ENMonthNameParser.ts","webpack://chrono/./src/locales/en/parsers/ENSlashDateFormatParser.ts","webpack://chrono/./src/locales/en/parsers/ENSlashDateFormatStartWithYearParser.ts","webpack://chrono/./src/locales/en/parsers/ENSlashMonthFormatParser.ts","webpack://chrono/./src/locales/ja/constants.ts","webpack://chrono/./src/locales/ja/parsers/JPStandardParser.ts","webpack://chrono/./src/common/abstractRefiners.ts","webpack://chrono/./src/common/refiners/AbstractMergeDateRangeRefiner.ts","webpack://chrono/./src/locales/ja/refiners/JPMergeDateRangeRefiner.ts","webpack://chrono/./src/locales/ja/parsers/JPCasualDateParser.ts","webpack://chrono/./src/locales/ja/index.ts","webpack://chrono/./src/index.ts","webpack://chrono/./src/locales/en/parsers/ENTimeExpressionParser.ts","webpack://chrono/./src/locales/en/parsers/ENTimeUnitAgoFormatParser.ts","webpack://chrono/./src/locales/en/parsers/ENTimeUnitLaterFormatParser.ts","webpack://chrono/./src/locales/en/refiners/ENMergeDateRangeRefiner.ts","webpack://chrono/./src/calculation/mergingCalculation.ts","webpack://chrono/./src/common/refiners/AbstractMergeDateTimeRefiner.ts","webpack://chrono/./src/locales/en/refiners/ENMergeDateTimeRefiner.ts","webpack://chrono/./src/common/refiners/ExtractTimezoneAbbrRefiner.ts","webpack://chrono/./src/common/refiners/ExtractTimezoneOffsetRefiner.ts","webpack://chrono/./src/common/refiners/OverlapRemovalRefiner.ts","webpack://chrono/./src/common/refiners/ForwardDateRefiner.ts","webpack://chrono/./src/common/refiners/UnlikelyFormatFilter.ts","webpack://chrono/./src/common/parsers/ISOFormatParser.ts","webpack://chrono/./src/configurations.ts","webpack://chrono/./src/locales/en/parsers/ENCasualDateParser.ts","webpack://chrono/./src/locales/en/parsers/ENCasualTimeParser.ts","webpack://chrono/./src/locales/en/parsers/ENWeekdayParser.ts","webpack://chrono/./src/locales/en/parsers/ENRelativeDateFormatParser.ts","webpack://chrono/./src/locales/en/index.ts","webpack://chrono/./src/chrono.ts"],"names":["ParsingComponents","refDate","knownComponents","knownValues","impliedValues","key","refDayJs","dayjs","imply","date","month","year","component","toDate","Object","keys","value","Date","isCertain","dateMoment","adjustTimezoneOffset","get","utcOffset","add","result","hour","minute","second","millisecond","currentTimezoneOffset","targetTimezoneOffset","JSON","stringify","fragments","components","assign","day","ParsingResult","index","text","start","end","clone","extractTerms","dictionary","Array","Map","from","matchAnyPattern","joinedTerms","sort","a","b","length","join","replace","WEEKDAY_DICTIONARY","MONTH_DICTIONARY","INTEGER_WORD_DICTIONARY","ORDINAL_WORD_DICTIONARY","TIME_UNIT_DICTIONARY","NUMBER_PATTERN","parseNumberPattern","match","num","toLowerCase","undefined","parseFloat","ORDINAL_NUMBER_PATTERN","parseOrdinalNumberPattern","parseInt","YEAR_PATTERN","parseYear","test","yearNumber","SINGLE_TIME_UNIT_PATTERN","SINGLE_TIME_UNIT_REGEX","RegExp","SINGLE_TIME_UNIT_PATTERN_NO_CAPTURE","TIME_UNITS_PATTERN","parseTimeUnits","timeunitText","remainingText","exec","collectDateTimeFragment","substring","unit","PATTERN","STRICT_PATTERN","ENTimeUnitDeadlineFormatParser","strictMode","context","timeUnits","createRelativeFromRefDate","findYearClosestToRef","refMoment","nextYear","lastYear","Math","abs","diff","WEEKDAY_GROUP","DATE_GROUP","DATE_TO_GROUP","MONTH_NAME_GROUP","YEAR_GROUP","ENMonthNameLittleEndianParser","createParsingResult","weekday","endDate","ENMonthNameMiddleEndianParser","createParsingComponents","ENMonthNameParser","monthName","DAYS_OFFSET","OPENING_GROUP","ENDING_GROUP","FIRST_NUMBERS_GROUP","SECOND_NUMBERS_GROUP","ENSlashDateFormatParser","littleEndian","groupNumberMonth","groupNumberDay","substr","indexOf","YEAR_NUMBER_GROUP","MONTH_NUMBER_GROUP","DATE_NUMBER_GROUP","ENSlashDateFormatStartWithYearParser","MONTH_GROUP","ENSlashMonthFormatParser","toHankaku","String","alphaNum","token","fromCharCode","charCodeAt","SPECIAL_YEAR_GROUP","TYPICAL_YEAR_GROUP","ERA_GROUP","DAY_GROUP","JPStandardParser","moment","yearNumText","Filter","results","filter","r","isValid","MergingRefiner","mergedResults","curResult","nextResult","i","textBetween","shouldMergeResults","push","left","right","mergedResult","mergeResults","debug","console","log","constructor","name","AbstractMergeDateRangeRefiner","currentResult","patternBetween","fromResult","toResult","isOnlyWeekdayComponent","getCertainComponents","forEach","getTime","fromMoment","toMoment","isBefore","isAfter","min","JPMergeDateRangeRefiner","JPCasualDateParser","Meridiem","PM","AM","casual","Chrono","createCasualConfiguration","strict","createConfiguration","parse","ref","option","parseDate","parsers","unshift","refiners","en","FIRST_REG_PATTERN","SECOND_REG_PATTERN","HOUR_GROUP","MINUTE_GROUP","SECOND_GROUP","MILLI_SECOND_GROUP","AM_PM_HOUR_GROUP","ENTimeExpressionParser","extractStartTimeComponent","newResult","extractEndTimeComponent","meridiem","floor","ampm","startAtPM","ENTimeUnitAgoFormatParser","GROUP_NUM_SUFFIX","GROUP_NUM_TIMEUNITS","ENTimeUnitLaterFormatParser","suffix","trim","ENMergeDateRangeRefiner","mergeDateTimeResult","dateResult","timeResult","beginDate","beginTime","mergeDateTimeComponent","endTime","endDateTime","dateComponent","timeComponent","dateTimeComponent","ENMergeDateTimeRefiner","isOnlyDate","isOnlyTime","AbstractMergeDateTimeRefiner","TIMEZONE_NAME_PATTERN","DEFAULT_TIMEZONE_ABBR_MAP","ExtractTimezoneAbbrRefiner","timezoneOverrides","timezone","timezones","timezoneAbbr","toUpperCase","timezoneOffset","TIMEZONE_OFFSET_PATTERN","TIMEZONE_OFFSET_SIGN_GROUP","TIMEZONE_OFFSET_HOUR_OFFSET_GROUP","TIMEZONE_OFFSET_MINUTE_OFFSET_GROUP","ExtractTimezoneOffsetRefiner","hourOffset","minuteOffset","OverlapRemovalRefiner","filteredResults","prevResult","ForwardDateRefiner","forwardDate","isOnlyDayMonthComponent","UnlikelyFormatFilter","isValidDate","HOUR_NUMBER_GROUP","MINUTE_NUMBER_GROUP","SECOND_NUMBER_GROUP","MILLISECOND_NUMBER_GROUP","TZD_HOUR_OFFSET_GROUP","TZD_MINUTE_OFFSET_GROUP","ISOFormatParser","offset","includeCommonConfiguration","configuration","ENCasualDateParser","targetDate","lowerText","ENCasualTimeParser","PREFIX_GROUP","POSTFIX_GROUP","ENWeekdayParser","dayOfWeek","prefix","postfix","modifier","extractWeekday","refOffset","MODIFIER_WORD_GROUP","MULTIPLIER_WORD_GROUP","RELATIVE_WORD_GROUP","ENRelativeDateFormatParser","extractThisReference","parsedNum","unitWord","extractDateReference","extractTimeReference","timeUnitWord","dateUnitWord","relativeWord","GB","opt","ParsingContext","parser","parsedResults","executeParser","concat","refiner","refine","pattern","originalText","extract","parsedResult","textOrEndIndex","startComponents","endComponents","block","Function","handler"],"mappings":"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","file":"chrono.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"chrono\"] = factory();\n\telse\n\t\troot[\"chrono\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):t.dayjs=e()}(this,function(){\"use strict\";var t=\"millisecond\",e=\"second\",n=\"minute\",r=\"hour\",i=\"day\",s=\"week\",u=\"month\",o=\"quarter\",a=\"year\",h=/^(\\d{4})-?(\\d{1,2})-?(\\d{0,2})[^0-9]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?.?(\\d{1,3})?$/,f=/\\[([^\\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},d={s:c,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+c(r,2,\"0\")+\":\"+c(i,2,\"0\")},m:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,u),i=e-r<0,s=t.clone().add(n+(i?-1:1),u);return Number(-(n+(e-r)/(i?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:a,w:s,d:i,D:\"date\",h:r,m:n,s:e,ms:t,Q:o}[h]||String(h||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},$={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},l=\"en\",m={};m[l]=$;var y=function(t){return t instanceof v},M=function(t,e,n){var r;if(!t)return l;if(\"string\"==typeof t)m[t]&&(r=t),e&&(m[t]=e,r=t);else{var i=t.name;m[i]=t,r=i}return!n&&r&&(l=r),r||!n&&l},g=function(t,e){if(y(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new v(n)},D=d;D.l=M,D.i=y,D.w=function(t,e){return g(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var v=function(){function c(t){this.$L=this.$L||M(t.locale,null,!0),this.parse(t)}var d=c.prototype;return d.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(D.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(h);if(r)return n?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(e)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return D},d.isValid=function(){return!(\"Invalid Date\"===this.$d.toString())},d.isSame=function(t,e){var n=g(t);return this.startOf(e)<=n&&n<=this.endOf(e)},d.isAfter=function(t,e){return g(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<g(t)},d.$g=function(t,e,n){return D.u(t)?this[e]:this.set(n,t)},d.year=function(t){return this.$g(t,\"$y\",a)},d.month=function(t){return this.$g(t,\"$M\",u)},d.day=function(t){return this.$g(t,\"$W\",i)},d.date=function(t){return this.$g(t,\"$D\",\"date\")},d.hour=function(t){return this.$g(t,\"$H\",r)},d.minute=function(t){return this.$g(t,\"$m\",n)},d.second=function(t){return this.$g(t,\"$s\",e)},d.millisecond=function(e){return this.$g(e,\"$ms\",t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,o){var h=this,f=!!D.u(o)||o,c=D.p(t),d=function(t,e){var n=D.w(h.$u?Date.UTC(h.$y,e,t):new Date(h.$y,e,t),h);return f?n:n.endOf(i)},$=function(t,e){return D.w(h.toDate()[t].apply(h.toDate(\"s\"),(f?[0,0,0,0]:[23,59,59,999]).slice(e)),h)},l=this.$W,m=this.$M,y=this.$D,M=\"set\"+(this.$u?\"UTC\":\"\");switch(c){case a:return f?d(1,0):d(31,11);case u:return f?d(1,m):d(0,m+1);case s:var g=this.$locale().weekStart||0,v=(l<g?l+7:l)-g;return d(f?y-v:y+(6-v),m);case i:case\"date\":return $(M+\"Hours\",0);case r:return $(M+\"Minutes\",1);case n:return $(M+\"Seconds\",2);case e:return $(M+\"Milliseconds\",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(s,o){var h,f=D.p(s),c=\"set\"+(this.$u?\"UTC\":\"\"),d=(h={},h[i]=c+\"Date\",h.date=c+\"Date\",h[u]=c+\"Month\",h[a]=c+\"FullYear\",h[r]=c+\"Hours\",h[n]=c+\"Minutes\",h[e]=c+\"Seconds\",h[t]=c+\"Milliseconds\",h)[f],$=f===i?this.$D+(o-this.$W):o;if(f===u||f===a){var l=this.clone().set(\"date\",1);l.$d[d]($),l.init(),this.$d=l.set(\"date\",Math.min(this.$D,l.daysInMonth())).toDate()}else d&&this.$d[d]($);return this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.get=function(t){return this[D.p(t)]()},d.add=function(t,o){var h,f=this;t=Number(t);var c=D.p(o),d=function(e){var n=g(f);return D.w(n.date(n.date()+Math.round(e*t)),f)};if(c===u)return this.set(u,this.$M+t);if(c===a)return this.set(a,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(h={},h[n]=6e4,h[r]=36e5,h[e]=1e3,h)[c]||1,l=this.$d.getTime()+t*$;return D.w(l,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this;if(!this.isValid())return\"Invalid Date\";var n=t||\"YYYY-MM-DDTHH:mm:ssZ\",r=D.z(this),i=this.$locale(),s=this.$H,u=this.$m,o=this.$M,a=i.weekdays,h=i.months,c=function(t,r,i,s){return t&&(t[r]||t(e,n))||i[r].substr(0,s)},d=function(t){return D.s(s%12||12,t,\"0\")},$=i.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:D.s(o+1,2,\"0\"),MMM:c(i.monthsShort,o,h,3),MMMM:c(h,o),D:this.$D,DD:D.s(this.$D,2,\"0\"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,a,2),ddd:c(i.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(s),HH:D.s(s,2,\"0\"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:D.s(u,2,\"0\"),s:String(this.$s),ss:D.s(this.$s,2,\"0\"),SSS:D.s(this.$ms,3,\"0\"),Z:r};return n.replace(f,function(t,e){return e||l[t]||r.replace(\":\",\"\")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,h,f){var c,d=D.p(h),$=g(t),l=6e4*($.utcOffset()-this.utcOffset()),m=this-$,y=D.m(this,$);return y=(c={},c[a]=y/12,c[u]=y,c[o]=y/3,c[s]=(m-l)/6048e5,c[i]=(m-l)/864e5,c[r]=m/36e5,c[n]=m/6e4,c[e]=m/1e3,c)[d]||m,f?y:D.a(y)},d.daysInMonth=function(){return this.endOf(u).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=M(t,e,!0);return r&&(n.$L=r),n},d.clone=function(){return D.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}();return g.prototype=v.prototype,g.extend=function(t,e){return t(e,v,g),g},g.locale=M,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=m[l],g.Ls=m,g});\n","import {Component, ParsedComponents, ParsedResult} from \"./index\";\n\nimport dayjs, {OpUnitType} from 'dayjs';\n\nexport class ParsingComponents implements ParsedComponents {\n    private knownValues: {[c: Component]: number}\n    private impliedValues: {[c: Component]: number}\n\n    constructor(\n        refDate: Date,\n        knownComponents?: {[c: Component]: string|number},\n    ) {\n        this.knownValues = {};\n        this.impliedValues = {};\n        if (knownComponents) {\n            for (const key in knownComponents) {\n                this.knownValues[key] = knownComponents[key];\n            }\n        }\n\n        const refDayJs = dayjs(refDate);\n        this.imply('day', refDayJs.date());\n        this.imply('month', refDayJs.month() + 1);\n        this.imply('year', refDayJs.year())\n        this.imply('hour', 12);\n        this.imply('minute', 0);\n        this.imply('second', 0);\n        this.imply('millisecond', 0);\n    }\n\n    get(component: Component) : (number | null) {\n\n        if (component in this.knownValues) {\n            return this.knownValues[component];\n        }\n\n        if (component in this.impliedValues) {\n            return this.impliedValues[component];\n        }\n\n        return null;\n    }\n\n    date() : Date {\n        return this.dayjs().toDate();\n    }\n\n    isCertain(component: Component) : boolean {\n        return component in this.knownValues;\n    }\n\n    getCertainComponents() : Array<Component> {\n        return Object.keys(this.knownValues) as Array<Component>\n    }\n\n    imply(component: Component, value: number) : ParsingComponents {\n        if (component in this.knownValues) return;\n        this.impliedValues[component] = value;\n        return this;\n    }\n\n    assign(component: Component, value: number) : ParsingComponents{\n        this.knownValues[component] = value;\n        delete this.impliedValues[component];\n        return this;\n    }\n\n    clone() : ParsingComponents {\n        const component = new ParsingComponents(new Date());\n        component.knownValues = {};\n        component.impliedValues = {};\n\n        for (const key in this.knownValues) {\n            component.knownValues[key] = this.knownValues[key];\n        }\n\n        for (const key in this.impliedValues) {\n            component.impliedValues[key] = this.impliedValues[key];\n        }\n\n        return component;\n    }\n\n    isOnlyDate() : boolean {\n        return !this.isCertain('hour') && !this.isCertain('minute') && !this.isCertain('second');\n    }\n\n    isOnlyTime() : boolean {\n        return !this.isCertain('weekday') && !this.isCertain('day') && !this.isCertain('month');\n    }\n\n    isOnlyWeekdayComponent() : boolean {\n        return this.isCertain('weekday') && !this.isCertain('day') && !this.isCertain('month');\n    }\n\n    isOnlyDayMonthComponent() : boolean {\n        return this.isCertain('day') && this.isCertain('month') && !this.isCertain('year');\n    }\n\n    isValidDate() : boolean {\n        let dateMoment = this.dayjs();\n        if (this.isCertain('timezoneOffset')) {\n            const adjustTimezoneOffset = this.get('timezoneOffset') - dateMoment.utcOffset();\n            dateMoment = dateMoment.add(adjustTimezoneOffset, 'minute');\n        }\n\n        if (dateMoment.get('year') != this.get('year')) return false;\n        if (dateMoment.get('month') != this.get('month')-1) return false;\n        if (dateMoment.get('date') != this.get('day')) return false;\n        if (dateMoment.get('hour') != this.get('hour')) return false;\n        if (dateMoment.get('minute') != this.get('minute')) return false;\n\n        return true;\n    }\n\n    dayjs() {\n        let result = dayjs();\n\n        result = result.year(this.get('year'));\n        result = result.month(this.get('month') - 1);\n        result = result.date(this.get('day'));\n        result = result.hour(this.get('hour'));\n        result = result.minute(this.get('minute'));\n        result = result.second(this.get('second'));\n        result = result.millisecond(this.get('millisecond'));\n\n        // Javascript Date Object return minus timezone offset\n        const currentTimezoneOffset = result.utcOffset();\n        const targetTimezoneOffset = this.get('timezoneOffset') !== null ?\n            this.get('timezoneOffset') : currentTimezoneOffset;\n\n        const adjustTimezoneOffset = targetTimezoneOffset - currentTimezoneOffset;\n        result = result.add(-adjustTimezoneOffset, 'minute');\n\n        return result;\n    }\n\n    toString() {\n        return `[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}]`;\n    }\n\n\n    static createRelativeFromRefDate(refDate:Date, fragments: {[c: OpUnitType]: number}) : ParsingComponents{\n        let date = dayjs(refDate);\n        for (const key in fragments) {\n            date = date.add(fragments[key], key);\n        }\n\n        const components = new ParsingComponents(refDate);\n        if (fragments['hour'] || fragments['minute'] || fragments['second']) {\n            components.assign('hour', date.hour());\n            components.assign('minute', date.minute());\n            components.assign('second', date.second());\n        }\n\n        if (fragments['d'] || fragments['month'] || fragments['year']) {\n            components.assign('day', date.date());\n            components.assign('month', date.month() + 1);\n            components.assign('year', date.year());\n        } else {\n            if (fragments['week']) {\n                components.imply('weekday', date.day());\n            }\n\n            components.imply('day', date.date());\n            components.imply('month', date.month() + 1);\n            components.imply('year', date.year());\n        }\n\n        return components;\n    }\n}\n\nexport class ParsingResult implements ParsedResult {\n\n    refDate: Date;\n    index: number;\n    text: string;\n\n    start: ParsingComponents;\n    end?: ParsingComponents;\n\n    constructor(\n        refDate: Date,\n        index: number,\n        text: string,\n        start?: ParsingComponents,\n        end?: ParsingComponents,\n    ) {\n        this.refDate = refDate;\n        this.index = index;\n        this.text  = text;\n        this.start = start || new ParsingComponents(this.refDate);\n        this.end = end;\n    }\n\n    clone() {\n        const result = new ParsingResult(this.refDate, this.index, this.text);\n        result.start = this.start ? this.start.clone() : null;\n        result.end = this.end ? this.end.clone() : null;\n        return result\n    }\n\n    date(): Date {\n        return this.start.date();\n    }\n\n    toString() {\n        return `[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`;\n    }\n}","\n\ntype DictionaryLike = string[] | {[word: string]} | Map<string, unknown>\n\nexport function extractTerms(dictionary: DictionaryLike): string[] {\n    let keys: string[];\n    if (dictionary instanceof Array) {\n        keys = [...dictionary];\n    } else if (dictionary instanceof Map) {\n        keys = Array.from((dictionary as Map<string, unknown>).keys());\n    } else {\n        keys = Object.keys(dictionary);\n    }\n\n    return keys;\n}\n\n\nexport function matchAnyPattern(dictionary: DictionaryLike) : string {\n    // TODO: More efficient regex pattern by considering duplicated prefix\n\n    const joinedTerms = extractTerms(dictionary)\n        .sort((a, b) => b.length - a.length)\n        .join('|')\n        .replace(/\\./g, '\\\\.')\n\n    return `(?:${joinedTerms})`;\n}","import {OpUnitType} from \"dayjs\";\nimport {matchAnyPattern} from \"../../utils/pattern\";\n\nexport const WEEKDAY_DICTIONARY: {[word: string]: number} = {\n    'sunday': 0,\n    'sun': 0,\n    'sun.': 0,\n    'monday': 1,\n    'mon': 1,\n    'mon.': 1,\n    'tuesday': 2,\n    'tue':2,\n    'tue.':2,\n    'wednesday': 3,\n    'wed': 3,\n    'wed.': 3,\n    'thursday': 4,\n    'thurs': 4,\n    'thurs.': 4,\n    'thur': 4,\n    'thur.': 4,\n    'thu': 4,\n    'thu.': 4,\n    'friday': 5,\n    'fri': 5,\n    'fri.': 5,\n    'saturday': 6,\n    'sat': 6,\n    'sat.': 6\n};\n\nexport const MONTH_DICTIONARY: {[word: string]: number}  = {\n    'january': 1,\n    'jan': 1,\n    'jan.': 1,\n    'february': 2,\n    'feb': 2,\n    'feb.': 2,\n    'march': 3,\n    'mar': 3,\n    'mar.': 3,\n    'april': 4,\n    'apr': 4,\n    'apr.': 4,\n    'may': 5,\n    'june': 6,\n    'jun': 6,\n    'jun.': 6,\n    'july': 7,\n    'jul': 7,\n    'jul.': 7,\n    'august': 8,\n    'aug': 8,\n    'aug.': 8,\n    'september': 9,\n    'sep': 9,\n    'sep.': 9,\n    'sept': 9,\n    'sept.': 9,\n    'october': 10,\n    'oct': 10,\n    'oct.': 10,\n    'november': 11,\n    'nov': 11,\n    'nov.': 11,\n    'december': 12,\n    'dec': 12,\n    'dec.': 12\n};\n\nexport const INTEGER_WORD_DICTIONARY: {[word: string]: number} = {\n    'one' : 1,\n    'two' : 2,\n    'three' : 3,\n    'four' : 4,\n    'five' : 5,\n    'six' : 6,\n    'seven' : 7,\n    'eight' : 8,\n    'nine' : 9,\n    'ten' : 10,\n    'eleven' : 11,\n    'twelve' : 12\n};\n\nexport const ORDINAL_WORD_DICTIONARY: {[word: string]: number} = {\n    'first' : 1,\n    'second': 2,\n    'third': 3,\n    'fourth': 4,\n    'fifth': 5,\n    'sixth': 6,\n    'seventh': 7,\n    'eighth': 8,\n    'ninth': 9,\n    'tenth': 10,\n    'eleventh': 11,\n    'twelfth': 12,\n    'thirteenth': 13,\n    'fourteenth': 14,\n    'fifteenth': 15,\n    'sixteenth': 16,\n    'seventeenth': 17,\n    'eighteenth': 18,\n    'nineteenth': 19,\n    'twentieth': 20,\n    'twenty first': 21,\n    'twenty-first': 21,\n    'twenty second': 22,\n    'twenty-second': 22,\n    'twenty third': 23,\n    'twenty-third': 23,\n    'twenty fourth': 24,\n    'twenty-fourth': 24,\n    'twenty fifth': 25,\n    'twenty-fifth': 25,\n    'twenty sixth': 26,\n    'twenty-sixth': 26,\n    'twenty seventh': 27,\n    'twenty-seventh': 27,\n    'twenty eighth': 28,\n    'twenty-eighth': 28,\n    'twenty ninth': 29,\n    'twenty-ninth': 29,\n    'thirtieth': 30,\n    'thirty first': 31,\n    'thirty-first': 31\n};\n\nexport const TIME_UNIT_DICTIONARY : {[word: string]: OpUnitType} = {\n    'sec': 'second',\n    'second' : 'second',\n    'seconds' : 'second',\n    'min' : 'minute',\n    'mins' : 'minute',\n    'minute' : 'minute',\n    'minutes' : 'minute',\n    'h' : 'hour',\n    'hr' : 'hour',\n    'hrs' : 'hour',\n    'hour' : 'hour',\n    'hours' : 'hour',\n    'day' : 'd',\n    'days' : 'd',\n    'week' : 'week',\n    'weeks': 'week',\n    'month' : 'month',\n    'months' : 'month',\n    'yr' : 'year',\n    'year' : 'year',\n    'years' : 'year',\n};\n\n//-----------------------------\n\nexport const NUMBER_PATTERN = `(?:${matchAnyPattern(INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\\\.[0-9]+|half(?:\\\\s*an?)?|an?(?:\\\\s*few)?|few)`;\n\nexport function parseNumberPattern(match: string) : number {\n    const num = match.toLowerCase();\n    if (INTEGER_WORD_DICTIONARY[num] !== undefined) {\n        return INTEGER_WORD_DICTIONARY[num];\n    } else if (num === 'a' || num === 'an') {\n        return 1;\n    } else if (num.match(/few/)) {\n        return 3;\n    } else if (num.match(/half/)) {\n        return 0.5;\n    }\n\n    return parseFloat(num);\n}\n\n//-----------------------------\n\nexport const ORDINAL_NUMBER_PATTERN = `(?:${matchAnyPattern(ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;\nexport function parseOrdinalNumberPattern(match: string) : number {\n    let num = match.toLowerCase();\n    if (ORDINAL_WORD_DICTIONARY[num] !== undefined) {\n        return ORDINAL_WORD_DICTIONARY[num];\n    }\n\n    num = num.replace(/(?:st|nd|rd|th)$/i, '')\n    return parseInt(num);\n}\n\n\n//-----------------------------\n\nexport const YEAR_PATTERN = `(?:[1-9][0-9]{0,3}\\\\s*(?:BE|AD|BC)|[1-2][0-9]{3}|[5-9][0-9])`;\nexport function parseYear(match: string) : number {\n    if (/BE/i.test(match)) {\n        // Buddhist Era\n        match = match.replace(/BE/i, '');\n        return parseInt(match) - 543;\n    }\n\n    if (/BC/i.test(match)){\n        // Before Christ\n        match = match.replace(/BC/i, '');\n        return -parseInt(match);\n    }\n\n    if (/AD/i.test(match)){\n        match = match.replace(/AD/i, '');\n        return parseInt(match);\n    }\n\n    let yearNumber = parseInt(match);\n    if (yearNumber < 100){\n        if (yearNumber > 50) {\n            yearNumber = yearNumber + 1900;\n        } else {\n            yearNumber = yearNumber + 2000;\n        }\n    }\n\n    return yearNumber;\n}\n\n//-----------------------------\n\nconst SINGLE_TIME_UNIT_PATTERN = `(${NUMBER_PATTERN})\\\\s*(${matchAnyPattern(TIME_UNIT_DICTIONARY)})\\\\s*`;\nconst SINGLE_TIME_UNIT_REGEX = new RegExp(SINGLE_TIME_UNIT_PATTERN, 'i');\n\nconst SINGLE_TIME_UNIT_PATTERN_NO_CAPTURE = SINGLE_TIME_UNIT_PATTERN.replace(/\\((?!\\?)/g, '(?:');\n\nexport const TIME_UNITS_PATTERN = `(?:${SINGLE_TIME_UNIT_PATTERN_NO_CAPTURE})+`;\n\nexport function parseTimeUnits(timeunitText) : {[c: OpUnitType]: number} {\n    const fragments = {};\n    let remainingText = timeunitText;\n    let match = SINGLE_TIME_UNIT_REGEX.exec(remainingText);\n    while (match) {\n        collectDateTimeFragment(fragments, match);\n        remainingText = remainingText.substring(match[0].length);\n        match = SINGLE_TIME_UNIT_REGEX.exec(remainingText);\n    }\n    return fragments;\n}\n\nfunction collectDateTimeFragment(fragments, match) {\n    const num = parseNumberPattern(match[1]);\n    const unit = TIME_UNIT_DICTIONARY[match[2].toLowerCase()]\n    fragments[unit] = num;\n}","import {TIME_UNITS_PATTERN, parseTimeUnits} from '../constants';\nimport {Parser, ParsingContext} from \"../../../chrono\";\nimport {ParsingComponents} from \"../../../results\";\n\nconst PATTERN = new RegExp(`(?<=\\\\W|^)` +\n    `(?:within|in)\\\\s*` +\n    '(' + TIME_UNITS_PATTERN + ')' +\n    `(?=\\\\W|$)`, 'i'\n);\n\nconst STRICT_PATTERN = new RegExp('(?<=\\\\W|^)' +\n    `(?:within|in)\\\\s*` +\n    '(' + TIME_UNITS_PATTERN + ')' +\n    `(?=\\\\W|$)`, 'i'\n);\n\nexport default class ENTimeUnitDeadlineFormatParser implements Parser {\n    constructor(private strictMode: boolean) {}\n\n    pattern(): RegExp {\n        return this.strictMode ? STRICT_PATTERN : PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray): ParsingComponents {\n        const timeUnits = parseTimeUnits(match[1]);\n        return ParsingComponents.createRelativeFromRefDate(context.refDate, timeUnits);\n    }\n}\n","import dayjs from \"dayjs\";\n\n\nexport function findYearClosestToRef(refDate: Date, day: number, month: number) : number {\n\n    //Find the most appropriated year\n    const refMoment = dayjs(refDate);\n    let dateMoment = refMoment;\n    dateMoment = dateMoment.month(month - 1);\n    dateMoment = dateMoment.date(day);\n    dateMoment = dateMoment.year(refMoment.year())\n\n    const nextYear = dateMoment.add(1, 'y');\n    const lastYear = dateMoment.add(-1, 'y');\n    if( Math.abs(nextYear.diff(refMoment)) < Math.abs(dateMoment.diff(refMoment)) ){\n        dateMoment = nextYear;\n    }\n    else if( Math.abs(lastYear.diff(refMoment)) < Math.abs(dateMoment.diff(refMoment)) ){\n        dateMoment = lastYear;\n    }\n\n    return dateMoment.year();\n}\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {ParsingResult} from \"../../../results\";\nimport {findYearClosestToRef} from \"../../../calculation/yearCalculation\";\nimport {MONTH_DICTIONARY, WEEKDAY_DICTIONARY,} from \"../constants\";\nimport {YEAR_PATTERN, parseYear} from \"../constants\";\nimport {ORDINAL_NUMBER_PATTERN, parseOrdinalNumberPattern} from \"../constants\";\nimport {matchAnyPattern} from \"../../../utils/pattern\";\n\n\nconst PATTERN = new RegExp('(?<=\\\\W|^)' +\n        '(?:on\\\\s*?)?' +\n        `(?:(${matchAnyPattern(WEEKDAY_DICTIONARY)})\\\\s*,?\\\\s*)?` +\n        `(${ORDINAL_NUMBER_PATTERN})` +\n        '(?:\\\\s*' +\n            '(?:to|\\\\-|\\\\–|until|through|till|\\\\s)\\\\s*' +\n            `(${ORDINAL_NUMBER_PATTERN})` +\n        ')?' + \n        '(?:-|/|\\\\s*(?:of)?\\\\s*)' +\n        '(' + matchAnyPattern(MONTH_DICTIONARY) + ')' +\n        '(?:' +\n            '(?:-|/|,?\\\\s*)' +\n            `(${YEAR_PATTERN}(?![^\\\\s]\\\\d))` +\n        ')?' +\n        '(?=\\\\W|$)', 'i'\n    );\n\nconst WEEKDAY_GROUP = 1;\nconst DATE_GROUP = 2;\nconst DATE_TO_GROUP = 3;\nconst MONTH_NAME_GROUP = 4;\nconst YEAR_GROUP = 5;\n\nexport default class ENMonthNameLittleEndianParser implements Parser {\n\n    pattern(): RegExp {\n        return PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray): ParsingResult {\n        //console.log(match)\n\n        const result = context.createParsingResult(match.index, match[0]);\n\n        const month = MONTH_DICTIONARY[match[MONTH_NAME_GROUP].toLowerCase()];\n        const day = parseOrdinalNumberPattern(match[DATE_GROUP]);\n\n        result.start.assign('month', month);\n        result.start.assign('day', day);\n\n        if (match[WEEKDAY_GROUP]) {\n            const weekday = WEEKDAY_DICTIONARY[match[WEEKDAY_GROUP].toLowerCase()]\n            result.start.assign('weekday', weekday);\n        }\n\n        if (match[YEAR_GROUP]) {\n            const yearNumber = parseYear(match[YEAR_GROUP])\n            result.start.assign('year', yearNumber)\n        } else {\n            const year = findYearClosestToRef(context.refDate, day, month);\n            result.start.imply('year', year)\n        }\n\n        if (match[DATE_TO_GROUP]) {\n            const endDate = parseOrdinalNumberPattern(match[DATE_TO_GROUP]);\n\n            result.end = result.start.clone();\n            result.end.assign('day', endDate);\n        }\n\n        return result;\n    }\n}\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {findYearClosestToRef} from \"../../../calculation/yearCalculation\";\nimport {MONTH_DICTIONARY, WEEKDAY_DICTIONARY} from \"../constants\";\nimport {ORDINAL_NUMBER_PATTERN, parseOrdinalNumberPattern} from \"../constants\";\nimport {YEAR_PATTERN, parseYear} from \"../constants\";\nimport {matchAnyPattern} from \"../../../utils/pattern\";\n\nconst PATTERN = new RegExp('(?<=\\\\W|^)' +\n    '(?:' +\n        '(?:on\\\\s*?)?' +\n        `(${matchAnyPattern(WEEKDAY_DICTIONARY)})` +\n    '\\\\s*,?\\\\s*)?' +\n    `(${matchAnyPattern(MONTH_DICTIONARY)})` +\n    '(?:-|/|\\\\s*,?\\\\s*)' +\n    `(${ORDINAL_NUMBER_PATTERN})(?!\\\\s*(?:am|pm))\\\\s*`+\n    '(?:' +\n        '(?:to|\\\\-)\\\\s*' +\n        `(${ORDINAL_NUMBER_PATTERN})\\\\s*` +\n    ')?' +\n    '(?:' +\n        '(?:-|/|\\\\s*,?\\\\s*)' +\n        `(${YEAR_PATTERN})` +\n    ')?' +\n    '(?=\\\\W|$)(?!\\\\:\\\\d)', 'i');\n\nconst WEEKDAY_GROUP = 1;\nconst MONTH_NAME_GROUP = 2;\nconst DATE_GROUP = 3;\nconst DATE_TO_GROUP = 4;\nconst YEAR_GROUP = 5;\n\n/**\n * The parser for parsing US's date format that begin with month's name.\n *  - January 13\n *  - January 13, 2012\n *  - January 13 - 15, 2012\n *  - Tuesday, January 13, 2012\n * Note: Watch out for:\n *  - January 12:00\n *  - January 12.44\n *  - January 1222344\n */\nexport default class ENMonthNameMiddleEndianParser implements Parser {\n\n    pattern(): RegExp {\n        return PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray) {\n\n        const month = MONTH_DICTIONARY[match[MONTH_NAME_GROUP].toLowerCase()];\n        const day = parseOrdinalNumberPattern(match[DATE_GROUP]);\n\n        const components = context.createParsingComponents({\n            'day': day, 'month': month\n        });\n\n        if (match[YEAR_GROUP]) {\n            const year = parseYear(match[YEAR_GROUP])\n            components.assign('year', year)\n        } else {\n            const year = findYearClosestToRef(context.refDate, day, month)\n            components.imply('year', year)\n        }\n\n        // Weekday component\n        if (match[WEEKDAY_GROUP]) {\n            const weekday = WEEKDAY_DICTIONARY[match[WEEKDAY_GROUP].toLowerCase()]\n            components.assign('weekday', weekday);\n        }\n\n        if (!match[DATE_TO_GROUP]) {\n            return components\n        }\n\n        // Text can be 'range' value. Such as 'January 12 - 13, 2012'\n        const endDate = parseOrdinalNumberPattern(match[DATE_TO_GROUP]);\n        const result = context.createParsingResult(match.index, match[0])\n        result.start = components;\n        result.end = components.clone();\n        result.end.assign('day', endDate);\n\n        return result;\n    }\n\n}","import {MONTH_DICTIONARY} from \"../constants\";\nimport {Parser, ParsingContext} from \"../../../chrono\";\nimport {findYearClosestToRef} from \"../../../calculation/yearCalculation\";\nimport {matchAnyPattern} from \"../../../utils/pattern\";\nimport {YEAR_PATTERN, parseYear} from \"../constants\";\n\nconst PATTERN = new RegExp('(?<=^|\\\\D\\\\s+|[^\\\\w\\\\s])' +\n    `(${matchAnyPattern(MONTH_DICTIONARY)})` +\n    '\\\\s*' +\n    '(?:' +\n        `[,-]?\\\\s*(${YEAR_PATTERN})?` +\n    ')?' +\n    '(?=[^\\\\s\\\\w]|\\\\s+[^0-9]|\\\\s+$|$)', 'i');\n\nconst MONTH_NAME_GROUP = 1;\nconst YEAR_GROUP = 2;\n\n/**\n * The parser for parsing month name and year.\n * - January, 2012\n * - January 2012\n * - January\n */\nexport default class ENMonthNameParser implements Parser {\n\n    pattern(): RegExp {return PATTERN; }\n\n    extract(context: ParsingContext, match: RegExpMatchArray) {\n\n        if (match[0].length <= 3) {\n            return null;\n        }\n\n        const components = context.createParsingComponents()\n        components.imply('day', 1);\n\n        const monthName = match[MONTH_NAME_GROUP];\n        const month = MONTH_DICTIONARY[monthName.toLowerCase()];\n        components.assign('month', month);\n\n        if (match[YEAR_GROUP]) {\n            const year = parseYear(match[YEAR_GROUP]);\n            components.assign('year', year)\n        } else {\n            const year = findYearClosestToRef(context.refDate, 1, month)\n            components.imply('year', year)\n        }\n\n        return components;\n    }\n}\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {ParsingResult} from \"../../../results\";\nimport dayjs from \"dayjs\";\nimport {parseYear} from \"../constants\";\nimport {findYearClosestToRef} from \"../../../calculation/yearCalculation\";\n\n\nconst PATTERN = new RegExp('(\\\\W|^)' +\n    '(?:' +\n        '(?:on\\\\s*?)?' +\n        '((?:sun|mon|tues?|wed(?:nes)?|thu(?:rs?)?|fri|sat(?:ur)?)(?:day)?)' +\n        '\\\\s*\\\\,?\\\\s*' +\n    ')?' +\n    '([0-3]{0,1}[0-9]{1})[\\\\/\\\\.\\\\-]([0-3]{0,1}[0-9]{1})' +\n    '(?:' +\n        '[\\\\/\\\\.\\\\-]' +\n        '([0-9]{4}\\\\s*\\\\,?\\\\s*|[0-9]{2}\\\\s*\\\\,?\\\\s*)' +\n    ')?' +\n    '(\\\\W|$)', 'i');\n\nconst DAYS_OFFSET = { 'sunday': 0, 'sun': 0, 'monday': 1, 'mon': 1,'tuesday': 2, 'wednesday': 3, 'wed': 3,\n    'thursday': 4, 'thur': 4,'friday': 5, 'fri': 5,'saturday': 6, 'sat': 6,}\n\n\nconst OPENING_GROUP = 1;\nconst ENDING_GROUP = 6;\n\nconst WEEKDAY_GROUP = 2;\n\nconst FIRST_NUMBERS_GROUP = 3;\nconst SECOND_NUMBERS_GROUP = 4;\n\nconst YEAR_GROUP = 5;\n\nexport default class ENSlashDateFormatParser implements Parser {\n    groupNumberMonth: number;\n    groupNumberDay: number;\n\n    constructor(littleEndian: boolean) {\n        this.groupNumberMonth = littleEndian ? SECOND_NUMBERS_GROUP : FIRST_NUMBERS_GROUP;\n        this.groupNumberDay = littleEndian ? FIRST_NUMBERS_GROUP : SECOND_NUMBERS_GROUP;\n    }\n\n    pattern(): RegExp {\n        return PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray): ParsingResult {\n\n        if(match[OPENING_GROUP] == '/' || match[ENDING_GROUP] == '/') {\n            // Long skip, if there is some overlapping like:\n            // XX[/YY/ZZ]\n            // [XX/YY/]ZZ\n            match.index += match[0].length\n            return;\n        }\n\n        const index = match.index + match[OPENING_GROUP].length;\n        const text = match[0].substr(match[OPENING_GROUP].length, match[0].length - match[ENDING_GROUP].length);\n\n        // '1.12', '1.12.12' is more like a version numbers\n        if(text.match(/^\\d\\.\\d$/) || text.match(/^\\d\\.\\d{1,2}\\.\\d{1,2}\\s*$/)) {\n            return;\n        }\n\n        // MM/dd -> OK\n        // MM.dd -> NG\n        if(!match[YEAR_GROUP] && match[0].indexOf('/') < 0) {\n            return;\n        }\n\n        const result = context.createParsingResult(index, text);\n        let month = parseInt(match[this.groupNumberMonth]);\n        let day   = parseInt(match[this.groupNumberDay]);\n\n        if(month < 1 || month > 12) {\n            if(month > 12) {\n                if (day >= 1 && day <= 12 && month <= 31) {\n                    [day, month] = [month, day]\n                } else {\n                    return null;\n                }\n            }\n        }\n\n        if (day < 1 || day > 31) {\n            return null;\n        }\n\n        result.start.assign('day', day);\n        result.start.assign('month', month);\n\n        if (match[YEAR_GROUP]) {\n            const year = parseYear(match[YEAR_GROUP]) || dayjs(context.refDate).year();\n            result.start.assign('year', year);\n        } else {\n            const year = findYearClosestToRef(context.refDate, day, month);\n            result.start.imply('year', year);\n        }\n\n        //Day of week\n        if(match[WEEKDAY_GROUP]) {\n            result.start.assign('weekday', DAYS_OFFSET[match[WEEKDAY_GROUP].toLowerCase()]);\n        }\n\n        return result;\n    }\n}\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {MONTH_DICTIONARY} from \"../constants\";\nimport {matchAnyPattern} from \"../../../utils/pattern\";\n\n/*\n    Date format with slash \"/\" between numbers like ENSlashDateFormatParser,\n    but this parser expect year before month and date.\n    - YYYY/MM/DD\n    - YYYY-MM-DD\n    - YYYY.MM.DD\n*/\nconst PATTERN = new RegExp('(?<=\\\\W|^)'\n    + '([0-9]{4})[\\\\.\\\\/]'\n    + '(?:(' + matchAnyPattern(MONTH_DICTIONARY) + ')|([0-9]{1,2}))[\\\\.\\\\/]'\n    + '([0-9]{1,2})'\n    + '(?=\\\\W|$)', 'i');\n\nconst YEAR_NUMBER_GROUP = 1;\nconst MONTH_NAME_GROUP = 2;\nconst MONTH_NUMBER_GROUP = 3;\nconst DATE_NUMBER_GROUP  = 4;\n\nexport default class ENSlashDateFormatStartWithYearParser implements Parser {\n\n    pattern(): RegExp { return PATTERN; }\n\n    extract(context: ParsingContext, match: RegExpMatchArray) {\n\n        const month = match[MONTH_NUMBER_GROUP] ? parseInt(match[MONTH_NUMBER_GROUP]) :\n            MONTH_DICTIONARY[match[MONTH_NAME_GROUP].toLowerCase()];\n\n        const year = parseInt(match[YEAR_NUMBER_GROUP]);\n        const day = parseInt(match[DATE_NUMBER_GROUP]);\n\n        return {\n            'day': day,\n            'month': month,\n            'year': year\n        }\n    }\n}\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {ParsingComponents} from \"../../../results\";\n\nconst PATTERN = new RegExp('(?<=^|[^\\\\d/]\\\\s+|[^\\\\w\\\\s])' +\n    '([0-9]|0[1-9]|1[012])/([0-9]{4})' +\n    '(?=[^\\\\d/]|$)', 'i');\n\nconst MONTH_GROUP = 1;\nconst YEAR_GROUP = 2;\n\n/**\n * Month/Year date format with slash \"/\" (also \"-\" and \".\") between numbers\n * - 11/05\n * - 06/2005\n */\nexport default class ENSlashMonthFormatParser implements Parser {\n\n    pattern(): RegExp {\n        return PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray): ParsingComponents {\n\n        const year = parseInt(match[YEAR_GROUP]);\n        const month = parseInt(match[MONTH_GROUP]);\n\n        return context.createParsingComponents()\n            .imply('day', 1)\n            .assign('month', month)\n            .assign('year', year)\n    }\n}\n","/**\n * to-hankaku.js\n * convert to ascii code strings.\n *\n * @version 1.0.1\n * @author think49\n * @url https://gist.github.com/964592\n * @license http://www.opensource.org/licenses/mit-license.php (The MIT License)\n */\nexport function toHankaku(text) {\n    return String(text).replace(/\\u2019/g, '\\u0027')\n        .replace(/\\u201D/g, '\\u0022')\n        .replace(/\\u3000/g, '\\u0020')\n        .replace(/\\uFFE5/g, '\\u00A5')\n        .replace(/[\\uFF01\\uFF03-\\uFF06\\uFF08\\uFF09\\uFF0C-\\uFF19\\uFF1C-\\uFF1F\\uFF21-\\uFF3B\\uFF3D\\uFF3F\\uFF41-\\uFF5B\\uFF5D\\uFF5E]/g, alphaNum);\n}\n\nfunction alphaNum (token) {\n    return String.fromCharCode(token.charCodeAt(0) - 65248);\n}","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {toHankaku} from \"../constants\";\nimport {findYearClosestToRef} from \"../../../calculation/yearCalculation\";\n\nimport dayjs from \"dayjs\";\n\n\nconst PATTERN = /(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\\s*)?([0-9０-９]{1,2})月\\s*([0-9０-９]{1,2})日/i;\nconst SPECIAL_YEAR_GROUP  = 1;\nconst TYPICAL_YEAR_GROUP  = 2;\nconst ERA_GROUP         = 3;\nconst YEAR_NUMBER_GROUP = 4;\nconst MONTH_GROUP       = 5;\nconst DAY_GROUP         = 6;\n\nexport default class JPStandardParser implements Parser {\n\n    pattern() {\n        return PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray) {\n\n        const month = parseInt(toHankaku(match[MONTH_GROUP]));\n        const day = parseInt(toHankaku(match[DAY_GROUP]));\n        const components = context.createParsingComponents({\n            'day': day, 'month': month\n        });\n\n        if (match[SPECIAL_YEAR_GROUP] && match[SPECIAL_YEAR_GROUP].match('同|今|本')) {\n\n            const moment = dayjs(context.refDate)\n            components.assign('year', moment.year());\n        }\n\n        if (match[TYPICAL_YEAR_GROUP]) {\n            const yearNumText = match[YEAR_NUMBER_GROUP];\n\n            let year = (yearNumText == '元') ? 1 : parseInt(toHankaku(yearNumText))\n            if (match[ERA_GROUP] == '令和') {\n                year += 2018;\n            } else if (match[ERA_GROUP] == '平成') {\n                year += 1988;\n            } else if (match[ERA_GROUP] == '昭和') {\n                year += 1925;\n            }\n\n            components.assign('year', year);\n\n        } else {\n            const year = findYearClosestToRef(context.refDate, day, month);\n            components.imply('year', year);\n        }\n\n        return components;\n    }\n}\n\n","import {ParsingContext, Refiner} from \"../chrono\";\nimport {ParsingResult} from \"../results\";\n\nexport abstract class Filter implements Refiner {\n\n    abstract isValid(context: ParsingContext, result: ParsingResult): boolean;\n\n    refine(context: ParsingContext, results: ParsingResult[]): ParsingResult[] {\n        return results.filter(r => this.isValid(context, r));\n    }\n}\n\nexport abstract class MergingRefiner implements Refiner {\n\n    abstract shouldMergeResults(textBetween: string, currentResult: ParsingResult, nextResult: ParsingResult, context: ParsingContext): boolean;\n\n    abstract mergeResults(textBetween: string, currentResult: ParsingResult, nextResult: ParsingResult, context: ParsingContext): ParsingResult;\n\n    refine(context: ParsingContext, results: ParsingResult[]): ParsingResult[] {\n\n        if (results.length < 2) {\n            return results;\n        }\n\n        const mergedResults: ParsingResult[] = [];\n        let curResult = results[0];\n        let nextResult = null;\n\n        for (let i=1; i<results.length; i++){\n            nextResult = results[i];\n\n            const textBetween = context.text.substring(curResult.index + curResult.text.length, nextResult.index);\n            if (!this.shouldMergeResults(textBetween, curResult, nextResult, context)) {\n                mergedResults.push(curResult);\n                curResult = nextResult;\n            } else {\n                const left = curResult;\n                const right = nextResult;\n                const mergedResult = this.mergeResults(textBetween, left, right, context);\n                context.debug(() => {\n                    console.log(`${this.constructor.name} merged ${left} and ${right} into ${mergedResult}`)\n                })\n\n                curResult = mergedResult;\n            }\n        }\n\n        if (curResult != null) {\n            mergedResults.push(curResult);\n        }\n\n        return mergedResults;\n    }\n}","/*\n  \n*/\n\nimport {ParsingResult} from \"../../results\";\nimport {MergingRefiner} from \"../abstractRefiners\";\n\nexport default abstract class AbstractMergeDateRangeRefiner extends MergingRefiner {\n\n    abstract patternBetween: () => RegExp\n\n    shouldMergeResults(textBetween, currentResult, nextResult): boolean {\n        return (!currentResult.end && !nextResult.end)\n            && textBetween.match(this.patternBetween()) != null;\n    }\n\n    mergeResults(textBetween, fromResult, toResult): ParsingResult {\n\n        if (!fromResult.start.isOnlyWeekdayComponent() && !toResult.start.isOnlyWeekdayComponent()) {\n\n            toResult.start.getCertainComponents().forEach(key => {\n                if (!fromResult.start.isCertain(key)) {\n                    fromResult.start.assign(key, toResult.start.get(key));\n                }\n            })\n\n            fromResult.start.getCertainComponents().forEach(key => {\n                if (!toResult.start.isCertain(key)) {\n                    toResult.start.assign(key, fromResult.start.get(key));\n                }\n            })\n        }\n\n        if (fromResult.start.date().getTime() > toResult.start.date().getTime()) {\n            let fromMoment = fromResult.start.dayjs();\n            let toMoment = toResult.start.dayjs();\n\n            if (fromResult.start.isOnlyWeekdayComponent() && fromMoment.add(-7, 'days').isBefore(toMoment)) {\n                fromMoment = fromMoment.add(-7, 'days');\n                fromResult.start.imply('day', fromMoment.date());\n                fromResult.start.imply('month', fromMoment.month() + 1);\n                fromResult.start.imply('year', fromMoment.year());\n            } else if (toResult.start.isOnlyWeekdayComponent() && toMoment.add(7, 'days').isAfter(fromMoment)) {\n                toMoment = toMoment.add(7, 'days');\n                toResult.start.imply('day', toMoment.date());\n                toResult.start.imply('month', toMoment.month() + 1);\n                toResult.start.imply('year', toMoment.year());\n            } else {\n                [toResult, fromResult] = [fromResult, toResult];\n            }\n        }\n\n        const result = fromResult.clone();\n        result.start = fromResult.start;\n        result.end = toResult.start;\n        result.index = Math.min(fromResult.index, toResult.index);\n        if (fromResult.index < toResult.index) {\n            result.text = fromResult.text + textBetween + toResult.text;\n        } else {\n            result.text = toResult.text + textBetween + fromResult.text;\n        }\n\n        return result;\n    }\n}\n\n","import AbstractMergeDateRangeRefiner from \"../../../common/refiners/AbstractMergeDateRangeRefiner\";\n\n/**\n * Merging before and after results (see. AbstractMergeDateRangeRefiner)\n * This implementation should provide Japanese connecting phases\n * - 水曜日[ー]日曜日\n * - 水曜日[から]日曜日\n */\nexport default class JPMergeDateRangeRefiner extends AbstractMergeDateRangeRefiner {\n\n    patternBetween(): RegExp {\n        return /^\\s*(から|ー|-)\\s*$/i ;\n    }\n}\n\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport dayjs from \"dayjs\";\nimport {Meridiem} from \"../../../index\";\n\n\nconst PATTERN = /今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i;\n\nexport default class JPCasualDateParser implements Parser {\n\n    pattern() {\n        return PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray) {\n\n        const text = match[0];\n\n        let date = dayjs(context.refDate);\n        const components = context.createParsingComponents()\n\n        if(text == '今夜' || text == '今夕' || text == '今晩'){\n\n            components.imply('hour', 22);\n            components.assign('meridiem', Meridiem.PM);\n\n        } else if (text.match(\"今朝\")) {\n\n            components.imply('hour', 6);\n            components.assign('meridiem', Meridiem.AM);\n\n        } else if(text == '明日'){\n\n            if(date.hour() > 4) { // Check not \"Tomorrow\" on late night\n                date = date.add(1, 'day');\n            }\n\n        } else if(text == '昨日') {\n\n            date = date.add(-1, 'day');\n        }\n\n        components.assign('day', date.date())\n        components.assign('month', date.month() + 1)\n        components.assign('year', date.year())\n        return components;\n    }\n}\n\n","import JPStandardParser from \"./parsers/JPStandardParser\";\nimport JPMergeDateRangeRefiner from \"./refiners/JPMergeDateRangeRefiner\";\nimport JPCasualDateParser from \"./parsers/JPCasualDateParser\";\n\nimport {Chrono, Configuration} from \"../../chrono\";\nimport {ParsedResult, ParsingOption} from \"../../index\";\n\n// Shortcuts\nexport const casual = new Chrono(createCasualConfiguration())\nexport const strict = new Chrono(createConfiguration())\n\nexport function parse(text: string, ref?: Date, option?: ParsingOption): ParsedResult[] {\n    return casual.parse(text, ref, option);\n}\n\nexport function parseDate(text: string, ref?: Date, option?: ParsingOption) : Date {\n    return casual.parseDate(text, ref, option);\n}\n\nexport function createCasualConfiguration() : Configuration {\n    const option = createConfiguration();\n    option.parsers.unshift(new JPCasualDateParser());\n    return option;\n}\n\nexport function createConfiguration() : Configuration {\n    return {\n        parsers: [\n            new JPStandardParser()\n        ],\n        refiners: [\n            new JPMergeDateRangeRefiner()\n        ]\n    }\n}","import {DebugHandler, DebugConsume} from \"./debugging\";\nimport * as en from './locales/en';\n\nexport {Chrono} from './chrono';\nexport const strict = en.strict;\nexport const casual = en.casual;\n\nexport function parse(text: string, ref?: Date, option?: ParsingOption): ParsedResult[] {\n    return casual.parse(text, ref, option);\n}\n\nexport function parseDate(text: string, ref?: Date, option?: ParsingOption) : Date {\n    return casual.parseDate(text, ref, option);\n}\n\nexport interface ParsingOption {\n    forwardDate?: boolean\n    debug?: DebugHandler | DebugConsume\n    timezones?: {string: number}\n}\n\nexport interface ParsedResult {\n    readonly refDate: Date\n    readonly index: number\n    readonly text: string\n\n    readonly start: ParsedComponents\n    readonly end?: ParsedComponents\n\n    readonly date: () => Date\n}\n\nexport interface ParsedComponents {\n    readonly get: (c: Component) => number\n    readonly date: () => Date\n}\n\nexport type Component =\n    'year' | 'month' | 'day' | 'weekday' |\n    'hour' | 'minute' | 'second' | 'millisecond' | 'meridiem' |\n    'timezoneOffset';\n\nexport enum Meridiem {\n    AM = 0,\n    PM = 1\n}\n\n// export * as xx from './locales/xx'\nexport * as en from './locales/en'\nexport * as ja from './locales/ja'\n\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {ParsingResult} from \"../../../results\";\nimport dayjs from \"dayjs\";\nimport {Meridiem} from \"../../../index\";\n\nconst FIRST_REG_PATTERN  = new RegExp(\"(^|\\\\s|T)\" +\n    \"(?:(?:at|from)\\\\s*)??\" +\n    \"(\\\\d{1,4}|noon|midnight)\" +\n    \"(?:\" +\n    \"(?:\\\\.|\\\\:|\\\\：)(\\\\d{1,2})\" +\n    \"(?:\" +\n    \"(?:\\\\:|\\\\：)(\\\\d{2})(?:\\\\.(\\\\d{1,6}))?\" +\n    \")?\" +\n    \")?\" +\n    \"(?:\\\\s*(a\\\\.m\\\\.|p\\\\.m\\\\.|am?|pm?|o\\\\W*clock))?\" +\n    \"(?=\\\\W|$)\", 'i');\n\nconst SECOND_REG_PATTERN = new RegExp(\"^\\\\s*\" +\n    \"(\\\\-|\\\\–|\\\\~|\\\\〜|to|\\\\?)\\\\s*\" +\n    \"(\\\\d{1,4})\" +\n    \"(?:\" +\n    \"(?:\\\\.|\\\\:|\\\\：)(\\\\d{1,2})\" +\n    \"(?:\" +\n    \"(?:\\\\.|\\\\:|\\\\：)(\\\\d{1,2})(?:\\\\.(\\\\d{1,6}))?\" +\n    \")?\" +\n    \")?\" +\n    \"(?:\\\\s*(a\\\\.m\\\\.|p\\\\.m\\\\.|am?|pm?|o\\\\W*clock|at night))?\" +\n    \"(?=\\\\W|$)\", 'i');\n\nconst HOUR_GROUP    = 2;\nconst MINUTE_GROUP  = 3;\nconst SECOND_GROUP  = 4;\nconst MILLI_SECOND_GROUP  = 5;\nconst AM_PM_HOUR_GROUP = 6;\n\nexport default class ENTimeExpressionParser implements Parser {\n\n    pattern(): RegExp {\n        return FIRST_REG_PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray): ParsingResult {\n        const refDate = dayjs(context.refDate);\n        let result = context.createParsingResult(\n            match.index + match[1].length, match[0].substring(match[1].length));\n\n        if (result.text.match(/^\\d$/)) {\n            return null;\n        }\n\n        result.start.imply('day',   refDate.date());\n        result.start.imply('month', refDate.month()+1);\n        result.start.imply('year',  refDate.year());\n\n        result = ENTimeExpressionParser.extractStartTimeComponent(result.clone(), match)\n        if (!result) {\n            return null;\n        }\n\n        const remainingText = context.text.substring(match.index + match[0].length)\n        match = SECOND_REG_PATTERN.exec(remainingText);\n        if (!match) {\n            return result;\n        }\n\n        // Pattern \"YY.YY -XXXX\" is more like timezone offset\n        if (match[0].match(/^\\s*([+-])\\s*\\d{3,4}$/)) {\n            return result;\n        }\n\n        const newResult = ENTimeExpressionParser.extractEndTimeComponent(result.clone(), match);\n        return newResult ? newResult : result;\n    }\n\n    private static extractStartTimeComponent(result: ParsingResult, match: RegExpMatchArray) : ParsingResult | null {\n\n        let hour = 0;\n        let minute = 0;\n        let meridiem = null;\n\n        // ----- Hours\n        if (match[HOUR_GROUP].toLowerCase() == \"noon\"){\n            meridiem = Meridiem.PM;\n            hour = 12;\n        } else if (match[HOUR_GROUP].toLowerCase() == \"midnight\") {\n            meridiem = Meridiem.AM;\n            hour = 0;\n        } else {\n            hour = parseInt(match[HOUR_GROUP]);\n        }\n\n        // ----- Minutes\n        if(match[MINUTE_GROUP] != null){\n            minute = parseInt(match[MINUTE_GROUP]);\n        } else if(hour > 100) {\n            minute = hour%100;\n            hour   = Math.floor(hour/100);\n        }\n\n        if(minute >= 60 || hour > 24) {\n            return null;\n        }\n\n        if (hour >= 12) {\n            meridiem = Meridiem.PM;\n        }\n\n        // ----- AM & PM\n        if(match[AM_PM_HOUR_GROUP] != null) {\n            if(hour > 12) return null;\n            const ampm = match[AM_PM_HOUR_GROUP][0].toLowerCase();\n            if(ampm == \"a\"){\n                meridiem = Meridiem.AM;\n                if (hour == 12) {\n                    hour = 0;\n                }\n            }\n\n            if(ampm == \"p\"){\n                meridiem = Meridiem.PM;\n                if (hour != 12) {\n                    hour += 12;\n                }\n            }\n        }\n\n        result.start.assign('hour', hour);\n        result.start.assign('minute', minute);\n\n        if (meridiem !== null) {\n            result.start.assign('meridiem', meridiem);\n        } else {\n            if (hour < 12) {\n                result.start.imply('meridiem', Meridiem.AM);\n            } else {\n                result.start.imply('meridiem', Meridiem.PM);\n            }\n        }\n\n        // ----- Millisecond\n        if(match[MILLI_SECOND_GROUP] != null) {\n            const millisecond = parseInt(match[MILLI_SECOND_GROUP].substring(0, 3));\n            if(millisecond >= 1000) return null;\n\n            result.start.assign('millisecond', millisecond);\n        }\n\n        // ----- Second\n        if(match[SECOND_GROUP] != null){\n            const second = parseInt(match[SECOND_GROUP]);\n            if(second >= 60) return null;\n\n            result.start.assign('second', second);\n        }\n\n        return result;\n    }\n\n    private static extractEndTimeComponent(result: ParsingResult, match: RegExpMatchArray) : ParsingResult | null {\n\n        result.end = result.start.clone();\n\n        // ----- Millisecond\n        if(match[MILLI_SECOND_GROUP] != null){\n            const millisecond = parseInt(match[MILLI_SECOND_GROUP].substring(0, 3));\n            if(millisecond >= 1000) return null;\n\n            result.end.assign('millisecond', millisecond);\n        }\n\n        // ----- Second\n        if(match[SECOND_GROUP] != null){\n            const second = parseInt(match[SECOND_GROUP]);\n            if(second >= 60) return null;\n\n            result.end.assign('second', second);\n        }\n\n\n        let hour = parseInt(match[HOUR_GROUP]);\n        let minute = 0;\n        let meridiem = -1;\n\n        // ----- Minute\n        if (match[MINUTE_GROUP] != null) {\n\n            minute = parseInt(match[MINUTE_GROUP]);\n\n        } else if (hour > 100) {\n\n            minute = hour%100;\n            hour   = Math.floor(hour/100);\n        }\n\n        if(minute >= 60 || hour > 24) {\n            return null;\n        }\n\n        if (hour >= 12) {\n            meridiem = Meridiem.PM;\n        }\n\n        // ----- AM & PM\n        if (match[AM_PM_HOUR_GROUP] != null) {\n            if (hour > 12) {\n                return null;\n            }\n\n            const ampm = match[AM_PM_HOUR_GROUP][0].toLowerCase();\n            if(ampm == \"a\"){\n                meridiem = Meridiem.AM;\n                if(hour == 12) {\n                    hour = 0;\n                    if (!result.end.isCertain('day')) {\n                        result.end.imply('day', result.end.get('day') + 1);\n                    }\n                }\n            }\n\n            if(ampm == \"p\"){\n                meridiem = Meridiem.PM;\n                if(hour != 12) hour += 12;\n            }\n\n            if (!result.start.isCertain('meridiem')) {\n                if (meridiem == Meridiem.AM) {\n\n                    result.start.imply('meridiem', Meridiem.AM);\n\n                    if (result.start.get('hour') == 12) {\n                        result.start.assign('hour', 0);\n                    }\n\n                } else {\n\n                    result.start.imply('meridiem', Meridiem.PM);\n\n                    if (result.start.get('hour') != 12) {\n                        result.start.assign('hour', result.start.get('hour') + 12);\n                    }\n                }\n            }\n        }\n\n        result.text = result.text + match[0];\n        result.end.assign('hour', hour);\n        result.end.assign('minute', minute);\n\n        if (meridiem >= 0) {\n            result.end.assign('meridiem', meridiem);\n        } else {\n            const startAtPM = result.start.isCertain('meridiem') && result.start.get('meridiem') == Meridiem.PM;\n            if (startAtPM && result.start.get('hour') > hour) {\n                // 10pm - 1 (am)\n                result.end.imply('meridiem', Meridiem.AM);\n\n            } else if (hour > 12) {\n                result.end.imply('meridiem', Meridiem.PM);\n            }\n        }\n\n        if (result.end.date().getTime() < result.start.date().getTime()) {\n            result.end.imply('day', result.end.get('day') + 1)\n        }\n\n        return result;\n    }\n}\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {\n    parseTimeUnits,\n    TIME_UNITS_PATTERN\n} from \"../constants\";\nimport {ParsingComponents} from \"../../../results\";\n\n\nconst PATTERN = new RegExp('' +\n    '(?<=\\\\W|^)' +\n    '(?:within\\\\s*)?' +\n    '(' + TIME_UNITS_PATTERN + ')' +\n    '(?:ago|before|earlier)(?=(?:\\\\W|$))', 'i');\n\nconst STRICT_PATTERN = new RegExp('' +\n    '(?<=\\\\W|^)' +\n    '(?:within\\\\s*)?' +\n    '(' + TIME_UNITS_PATTERN + ')' +\n    'ago(?=(?:\\\\W|$))', 'i');\n\nexport default class ENTimeUnitAgoFormatParser implements Parser {\n\n    constructor(private strictMode: boolean) {}\n\n    pattern(): RegExp { return this.strictMode ? STRICT_PATTERN : PATTERN; }\n\n    extract(context: ParsingContext, match: RegExpMatchArray) {\n\n        const fragments = parseTimeUnits(match[1]);\n        for (const key in fragments) {\n            fragments[key] = -fragments[key];\n        }\n\n        return ParsingComponents.createRelativeFromRefDate(context.refDate, fragments);\n    }\n}\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {\n    parseTimeUnits,\n    TIME_UNITS_PATTERN\n} from \"../constants\";\nimport {ParsingComponents} from \"../../../results\";\n\n\nconst PATTERN = new RegExp('' +\n    '(?<=\\\\W|^)' +\n    '(' + TIME_UNITS_PATTERN + ')' +\n    '(later|after|from now|henceforth|forward|out)' +\n    '(?=(?:\\\\W|$))',\n'i');\n\nconst STRICT_PATTERN = new RegExp('' +\n    '(?<=\\\\W|^)' +\n    '(' + TIME_UNITS_PATTERN + ')' +\n    '(later|from now)' +\n    '(?=(?:\\\\W|$))',\n'i');\n\nconst GROUP_NUM_SUFFIX = 2\nconst GROUP_NUM_TIMEUNITS = 1\n\nexport default class ENTimeUnitLaterFormatParser implements Parser {\n\n    constructor(private strictMode: boolean) {}\n\n    pattern(): RegExp { return this.strictMode ? STRICT_PATTERN : PATTERN; }\n\n    extract(context: ParsingContext, match: RegExpMatchArray) {\n\n        const suffix = match[GROUP_NUM_SUFFIX].toLowerCase().trim();\n        if (!suffix) {\n            return null;\n        }\n\n        const fragments = parseTimeUnits(match[GROUP_NUM_TIMEUNITS]);\n        return ParsingComponents.createRelativeFromRefDate(context.refDate, fragments);\n    }\n}\n","/*\n  \n*/\n\n\nimport AbstractMergeDateRangeRefiner from \"../../../common/refiners/AbstractMergeDateRangeRefiner\";\n\n/**\n * Merging before and after results (see. AbstractMergeDateRangeRefiner)\n * This implementation should provide English connecting phases\n * - 2020-02-13 [to] 2020-02-13\n * - Wednesday [-] Friday\n */\nexport default class ENMergeDateRangeRefiner extends AbstractMergeDateRangeRefiner {\n\n    patternBetween(): RegExp {\n        return /^\\s*(to|-)\\s*$/i;\n    }\n}\n\n","import {ParsingComponents, ParsingResult} from \"../results\";\nimport {Meridiem} from \"../index\";\n\nexport function mergeDateTimeResult(\n    dateResult: ParsingResult,\n    timeResult: ParsingResult): ParsingResult {\n\n    const result = dateResult.clone();\n    const beginDate = dateResult.start;\n    const beginTime = timeResult.start;\n\n    result.start = mergeDateTimeComponent(beginDate, beginTime);\n    if (dateResult.end != null || timeResult.end != null) {\n        const endDate   = dateResult.end == null ? dateResult.start : dateResult.end;\n        const endTime   = timeResult.end == null ? timeResult.start : timeResult.end;\n        const endDateTime = mergeDateTimeComponent(endDate, endTime);\n\n        if (dateResult.end == null && endDateTime.date().getTime() < result.start .date().getTime()) {\n            // Ex. 9pm - 1am\n            if (endDateTime.isCertain('day')) {\n                endDateTime.assign('day', endDateTime.get('day') + 1);\n            } else {\n                endDateTime.imply('day', endDateTime.get('day') + 1);\n            }\n        }\n\n        result.end = endDateTime;\n    }\n\n    return result;\n}\n\nexport function mergeDateTimeComponent(dateComponent: ParsingComponents, timeComponent: ParsingComponents): ParsingComponents {\n    const dateTimeComponent = dateComponent.clone();\n\n    if (timeComponent.isCertain('hour')) {\n        dateTimeComponent.assign('hour', timeComponent.get('hour'));\n        dateTimeComponent.assign('minute', timeComponent.get('minute'));\n\n        if (timeComponent.isCertain('second')) {\n            dateTimeComponent.assign('second', timeComponent.get('second'));\n\n            if (timeComponent.isCertain('millisecond')) {\n                dateTimeComponent.assign('millisecond', timeComponent.get('millisecond'));\n            } else {\n                dateTimeComponent.imply('millisecond', timeComponent.get('millisecond'));\n            }\n        } else {\n            dateTimeComponent.imply('second', timeComponent.get('second'));\n            dateTimeComponent.imply('millisecond', timeComponent.get('millisecond'));\n        }\n\n    } else {\n        dateTimeComponent.imply('hour', timeComponent.get('hour'));\n        dateTimeComponent.imply('minute', timeComponent.get('minute'));\n        dateTimeComponent.imply('second', timeComponent.get('second'));\n        dateTimeComponent.imply('millisecond', timeComponent.get('millisecond'));\n    }\n\n    if (timeComponent.isCertain('timezoneOffset')) {\n        dateTimeComponent.assign('timezoneOffset', timeComponent.get('timezoneOffset'))\n    }\n\n    if (timeComponent.isCertain('meridiem')) {\n        dateTimeComponent.assign('meridiem', timeComponent.get('meridiem'));\n    } else if (\n        timeComponent.get('meridiem') != null && dateTimeComponent.get('meridiem') == null\n    ) {\n        dateTimeComponent.imply('meridiem', timeComponent.get('meridiem'));\n    }\n\n    if (dateTimeComponent.get('meridiem') == Meridiem.PM && dateTimeComponent.get('hour') < 12) {\n        if (timeComponent.isCertain('hour')) {\n            dateTimeComponent.assign('hour', dateTimeComponent.get('hour') + 12);\n        } else {\n            dateTimeComponent.imply('hour', dateTimeComponent.get('hour') + 12);\n        }\n    }\n\n    return dateTimeComponent;\n}\n\n","/*\n\n*/\n\n\nimport {MergingRefiner} from \"../abstractRefiners\";\nimport {ParsingResult} from \"../../results\";\nimport {mergeDateTimeResult} from \"../../calculation/mergingCalculation\";\n\n\nexport default abstract class ENMergeDateTimeRefiner extends MergingRefiner {\n\n    abstract patternBetween: () => RegExp\n\n    shouldMergeResults(textBetween: string, currentResult: ParsingResult, nextResult: ParsingResult): boolean {\n        return (\n                (currentResult.start.isOnlyDate() && nextResult.start.isOnlyTime()) ||\n                (nextResult.start.isOnlyDate() && currentResult.start.isOnlyTime())\n            )\n            && textBetween.match(this.patternBetween()) != null;\n    }\n\n    mergeResults(textBetween: string, currentResult: ParsingResult, nextResult: ParsingResult): ParsingResult {\n\n        const result = currentResult.start.isOnlyDate() ?\n            mergeDateTimeResult(currentResult, nextResult):\n            mergeDateTimeResult(nextResult, currentResult);\n\n        result.index = currentResult.index;\n        result.text = currentResult.text + textBetween + nextResult.text;\n        return result;\n    }\n}\n\n","import AbstractMergeDateTimeRefiner from \"../../../common/refiners/AbstractMergeDateTimeRefiner\";\n\n/**\n * Merging date-only result and time-only result (see. AbstractMergeDateTimeRefiner).\n * This implementation should provide English connecting phases\n * - 2020-02-13 [at] 6pm\n * - Tomorrow [after] 7am\n */\nexport default class ENMergeDateTimeRefiner extends AbstractMergeDateTimeRefiner {\n    patternBetween(): RegExp {\n        return new RegExp(\"^\\\\s*(T|at|after|before|on|of|,|-)?\\\\s*$\");\n    }\n}\n\n","\n// Map ABBR -> Offset in minute\nimport {ParsingContext, Refiner} from \"../../chrono\";\nimport {ParsingResult} from \"../../results\";\n\nconst TIMEZONE_NAME_PATTERN = new RegExp(\"^\\\\s*\\\\(?([A-Z]{2,4})\\\\)?(?=\\\\W|$)\", 'i');\nconst DEFAULT_TIMEZONE_ABBR_MAP = {\n    \"ACDT\":630,\"ACST\":570,\"ADT\":-180,\"AEDT\":660,\"AEST\":600,\"AFT\":270,\"AKDT\":-480,\"AKST\":-540,\"ALMT\":360,\"AMST\":-180,\"AMT\":-240,\"ANAST\":720,\"ANAT\":720,\"AQTT\":300,\"ART\":-180,\"AST\":-240,\"AWDT\":540,\"AWST\":480,\"AZOST\":0,\"AZOT\":-60,\"AZST\":300,\"AZT\":240,\"BNT\":480,\"BOT\":-240,\"BRST\":-120,\"BRT\":-180,\"BST\":60,\"BTT\":360,\"CAST\":480,\"CAT\":120,\"CCT\":390,\"CDT\":-300,\"CEST\":120,\"CET\":60,\"CHADT\":825,\"CHAST\":765,\"CKT\":-600,\"CLST\":-180,\"CLT\":-240,\"COT\":-300,\"CST\":-360,\"CVT\":-60,\"CXT\":420,\"ChST\":600,\"DAVT\":420,\"EASST\":-300,\"EAST\":-360,\"EAT\":180,\"ECT\":-300,\"EDT\":-240,\"EEST\":180,\"EET\":120,\"EGST\":0,\"EGT\":-60,\"EST\":-300,\"ET\":-300,\"FJST\":780,\"FJT\":720,\"FKST\":-180,\"FKT\":-240,\"FNT\":-120,\"GALT\":-360,\"GAMT\":-540,\"GET\":240,\"GFT\":-180,\"GILT\":720,\"GMT\":0,\"GST\":240,\"GYT\":-240,\"HAA\":-180,\"HAC\":-300,\"HADT\":-540,\"HAE\":-240,\"HAP\":-420,\"HAR\":-360,\"HAST\":-600,\"HAT\":-90,\"HAY\":-480,\"HKT\":480,\"HLV\":-210,\"HNA\":-240,\"HNC\":-360,\"HNE\":-300,\"HNP\":-480,\"HNR\":-420,\"HNT\":-150,\"HNY\":-540,\"HOVT\":420,\"ICT\":420,\"IDT\":180,\"IOT\":360,\"IRDT\":270,\"IRKST\":540,\"IRKT\":540,\"IRST\":210,\"IST\":330,\"JST\":540,\"KGT\":360,\"KRAST\":480,\"KRAT\":480,\"KST\":540,\"KUYT\":240,\"LHDT\":660,\"LHST\":630,\"LINT\":840,\"MAGST\":720,\"MAGT\":720,\"MART\":-510,\"MAWT\":300,\"MDT\":-360,\"MESZ\":120,\"MEZ\":60,\"MHT\":720,\"MMT\":390,\"MSD\":240,\"MSK\":240,\"MST\":-420,\"MUT\":240,\"MVT\":300,\"MYT\":480,\"NCT\":660,\"NDT\":-90,\"NFT\":690,\"NOVST\":420,\"NOVT\":360,\"NPT\":345,\"NST\":-150,\"NUT\":-660,\"NZDT\":780,\"NZST\":720,\"OMSST\":420,\"OMST\":420,\"PDT\":-420,\"PET\":-300,\"PETST\":720,\"PETT\":720,\"PGT\":600,\"PHOT\":780,\"PHT\":480,\"PKT\":300,\"PMDT\":-120,\"PMST\":-180,\"PONT\":660,\"PST\":-480,\"PT\":-480,\"PWT\":540,\"PYST\":-180,\"PYT\":-240,\"RET\":240,\"SAMT\":240,\"SAST\":120,\"SBT\":660,\"SCT\":240,\"SGT\":480,\"SRT\":-180,\"SST\":-660,\"TAHT\":-600,\"TFT\":300,\"TJT\":300,\"TKT\":780,\"TLT\":540,\"TMT\":300,\"TVT\":720,\"ULAT\":480,\"UTC\":0,\"UYST\":-120,\"UYT\":-180,\"UZT\":300,\"VET\":-210,\"VLAST\":660,\"VLAT\":660,\"VUT\":660,\"WAST\":120,\"WAT\":60,\"WEST\":60,\"WESZ\":60,\"WET\":0,\"WEZ\":0,\"WFT\":720,\"WGST\":-120,\"WGT\":-180,\"WIB\":420,\"WIT\":540,\"WITA\":480,\"WST\":780,\"WT\":0,\"YAKST\":600,\"YAKT\":600,\"YAPT\":600,\"YEKST\":360,\"YEKT\":360\n};\n\nexport default class ExtractTimezoneAbbrRefiner implements Refiner {\n\n    private readonly timezone: {string: number}\n\n    constructor(timezoneOverrides? : {string: number}) {\n        this.timezone = {...DEFAULT_TIMEZONE_ABBR_MAP, ...timezoneOverrides};\n    }\n\n    refine(context: ParsingContext, results: ParsingResult[]): ParsingResult[] {\n        const timezones = {...this.timezone, ...context.option.timezones};\n        results.forEach((result) => {\n            const suffix = context.text.substring(result.index + result.text.length)\n            const match = TIMEZONE_NAME_PATTERN.exec(suffix);\n            if (match) {\n                const timezoneAbbr = match[1].toUpperCase();\n                if (timezones[timezoneAbbr] === undefined) {\n                    return;\n                }\n\n                const timezoneOffset = timezones[timezoneAbbr];\n                if (!result.start.isCertain('timezoneOffset')) {\n                    result.start.assign('timezoneOffset', timezoneOffset);\n                }\n\n                if (result.end != null && !result.end.isCertain('timezoneOffset')) {\n                    result.end.assign('timezoneOffset', timezoneOffset);\n                }\n\n                result.text += match[0];\n            }\n        });\n\n        return results;\n    }\n}","/*\n  \n*/\n\n\nimport {ParsingContext, Refiner} from \"../../chrono\";\nimport {ParsingResult} from \"../../results\";\n\nconst TIMEZONE_OFFSET_PATTERN = new RegExp(\"^\\\\s*(GMT|UTC)?([+-])(\\\\d{1,2}):?(\\\\d{2})\", 'i');\nconst TIMEZONE_OFFSET_SIGN_GROUP = 2;\nconst TIMEZONE_OFFSET_HOUR_OFFSET_GROUP = 3;\nconst TIMEZONE_OFFSET_MINUTE_OFFSET_GROUP = 4;\n\nexport default class ExtractTimezoneOffsetRefiner implements Refiner {\n\n    refine(context: ParsingContext, results: ParsingResult[]): ParsingResult[] {\n\n        results.forEach(function(result) {\n            if (result.start.isCertain('timezoneOffset')) {\n                return;\n            }\n\n            const suffix = context.text.substring(result.index + result.text.length);\n            const match = TIMEZONE_OFFSET_PATTERN.exec(suffix);\n            if (!match) {\n                return;\n            }\n\n            context.debug(() => {\n                console.log(`Extracting timezone: '${match[0]}' into : ${result}`)\n            })\n\n            const hourOffset = parseInt(match[TIMEZONE_OFFSET_HOUR_OFFSET_GROUP]);\n            const minuteOffset = parseInt(match[TIMEZONE_OFFSET_MINUTE_OFFSET_GROUP]);\n            let timezoneOffset = hourOffset * 60 + minuteOffset;\n            if (match[TIMEZONE_OFFSET_SIGN_GROUP] === '-') {\n                timezoneOffset = -timezoneOffset;\n            }\n\n            if (result.end != null) {\n                result.end.assign('timezoneOffset', timezoneOffset);\n            }\n\n            result.start.assign('timezoneOffset', timezoneOffset);\n            result.text += match[0];\n        });\n\n        return results;\n    }\n}\n","/*\n  \n*/\n\nimport {ParsingContext, Refiner} from \"../../chrono\";\nimport {ParsingResult} from \"../../results\";\n\nexport default class OverlapRemovalRefiner implements Refiner {\n\n    refine(context: ParsingContext, results: ParsingResult[]): ParsingResult[] {\n        if (results.length < 2) {\n            return results;\n        }\n        \n        const filteredResults = [];\n\n        let prevResult = results[0];\n        for (let i=1; i<results.length; i++){\n            const result = results[i];\n            \n            // If overlap, compare the length and discard the shorter one\n            if (result.index < prevResult.index + prevResult.text.length) {\n\n                if (result.text.length > prevResult.text.length){\n                    prevResult = result;\n                }\n                \n            } else {\n                filteredResults.push(prevResult);\n                prevResult = result;\n            }\n        }\n        \n        // The last one\n        if (prevResult != null) {\n            filteredResults.push(prevResult);\n        }\n\n        return filteredResults;\n    }\n}","/*\n    Enforce 'forwardDate' option to on the results. When there are missing component,\n    e.g. \"March 12-13 (without year)\" or \"Thursday\", the refiner will try to adjust the result\n    into the future instead of the past.\n*/\n\nimport {ParsingContext, Refiner} from \"../../chrono\";\nimport {ParsingResult} from \"../../results\";\nimport dayjs from \"dayjs\";\n\nexport default class ForwardDateRefiner implements Refiner {\n\n    refine(context: ParsingContext, results: ParsingResult[]): ParsingResult[] {\n\n        if (!context.option.forwardDate) {\n            return results;\n        }\n\n        results.forEach(function(result) {\n            let refMoment = dayjs(context.refDate);\n\n            if (result.start.isOnlyDayMonthComponent() && refMoment.isAfter(result.start.dayjs())) {\n\n                for (let i=0; i < 3 && refMoment.isAfter(result.start.dayjs()); i++) {\n                    result.start.imply('year', result.start.get('year') + 1);\n                    context.debug(() => {\n                        console.log(`Forward yearly adjusted for ${result} (${result.start})`)\n                    });\n\n                    if (result.end && !result.end.isCertain('year')) {\n                        result.end.imply('year', result.end.get('year') + 1);\n                        context.debug(() => {\n                            console.log(`Forward yearly adjusted for ${result} (${result.end})`)\n                        });\n                    }\n                }\n            }\n\n            if (result.start.isOnlyWeekdayComponent() && refMoment.isAfter(result.start.dayjs())) {\n\n                if (refMoment.day() > result.start.get('weekday')) {\n                    refMoment = refMoment.day(result.start.get('weekday') + 7);\n                } else {\n                    refMoment = refMoment.day(<number>result.start.get('weekday'));\n                }\n\n                result.start.imply('day', refMoment.date());\n                result.start.imply('month', refMoment.month() + 1);\n                result.start.imply('year', refMoment.year());\n                context.debug(() => {\n                    console.log(`Forward weekly adjusted for ${result} (${result.start})`)\n                });\n\n                if (result.end && result.end.isOnlyWeekdayComponent()) {\n                    // Adjust date to the coming week\n                    if (refMoment.day() > result.end.get('weekday')) {\n                        refMoment = refMoment.day(result.end.get('weekday') + 7);\n                    } else {\n                        refMoment = refMoment.day(<number>result.end.get('weekday'));\n                    }\n\n                    result.end.imply('day', refMoment.date());\n                    result.end.imply('month', refMoment.month() + 1);\n                    result.end.imply('year', refMoment.year());\n                    context.debug(() => {\n                        console.log(`Forward weekly adjusted for ${result} (${result.end})`)\n                    });\n                }\n            }\n        });\n\n        return results;\n    }\n}\n","import {Filter} from \"../abstractRefiners\";\nimport {ParsingResult} from \"../../results\";\n\nexport default class UnlikelyFormatFilter extends Filter {\n\n    isValid(context, result: ParsingResult): boolean {\n\n        if (result.text.replace(' ','').match(/^\\d*(\\.\\d*)?$/)) {\n            context.debug(() => {\n                console.log(`Removing unlikely result '${result.text}'`)\n            })\n\n            return false;\n        }\n\n        if (!result.start.isValidDate()) {\n            context.debug(() => {\n                console.log(`Removing invalid result: ${result} (${result.start})`)\n            });\n\n            return false;\n        }\n\n        if (result.end && !result.end.isValidDate()) {\n            context.debug(() => {\n                console.log(`Removing invalid result: ${result} (${result.end})`)\n            });\n\n            return false;\n        }\n\n        return true;\n    }\n}","import {Parser, ParsingContext} from \"../../chrono\";\nimport {Component} from \"../../index\";\n\n// ISO 8601\n// http://www.w3.org/TR/NOTE-datetime\n// - YYYY-MM-DD\n// - YYYY-MM-DDThh:mmTZD\n// - YYYY-MM-DDThh:mm:ssTZD\n// - YYYY-MM-DDThh:mm:ss.sTZD\n// - TZD = (Z or +hh:mm or -hh:mm)\nconst PATTERN = new RegExp('(?<=\\\\W|^)'\n            + '([0-9]{4})\\\\-([0-9]{1,2})\\\\-([0-9]{1,2})'\n            + '(?:T' //..\n                + '([0-9]{1,2}):([0-9]{1,2})' // hh:mm\n                + '(?::([0-9]{1,2})(?:\\\\.(\\\\d{1,4}))?)?' // :ss.s\n                + '(?:Z|([+-]\\\\d{2}):?(\\\\d{2})?)?' // TZD (Z or ±hh:mm or ±hhmm or ±hh)\n            + ')?'  //..\n            + '(?=\\\\W|$)', 'i');\n\nconst YEAR_NUMBER_GROUP = 1;\nconst MONTH_NUMBER_GROUP = 2;\nconst DATE_NUMBER_GROUP  = 3;\nconst HOUR_NUMBER_GROUP  = 4;\nconst MINUTE_NUMBER_GROUP = 5;\nconst SECOND_NUMBER_GROUP = 6;\nconst MILLISECOND_NUMBER_GROUP = 7;\nconst TZD_HOUR_OFFSET_GROUP = 8;\nconst TZD_MINUTE_OFFSET_GROUP = 9;\n\nexport default class ISOFormatParser implements Parser {\n\n    pattern(): RegExp {\n        return PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray) : {[component: Component]: string | number}{\n        const components: {[component: Component]: string | number} = {}\n        components['year'] = parseInt(match[YEAR_NUMBER_GROUP])\n        components['month'] = parseInt(match[MONTH_NUMBER_GROUP])\n        components['day'] = parseInt(match[DATE_NUMBER_GROUP])\n\n        if (match[HOUR_NUMBER_GROUP] != null) {\n            components['hour'] = parseInt(match[HOUR_NUMBER_GROUP]);\n            components['minute'] = parseInt(match[MINUTE_NUMBER_GROUP]);\n\n            if (match[SECOND_NUMBER_GROUP] != null) {\n                components['second'] = parseInt(match[SECOND_NUMBER_GROUP]);\n            }\n\n            if (match[MILLISECOND_NUMBER_GROUP] != null) {\n                components['millisecond'] = parseInt(match[MILLISECOND_NUMBER_GROUP]);\n            }\n\n            if (match[TZD_HOUR_OFFSET_GROUP] == null) {\n                components['timezoneOffset'] = 0;\n\n            } else {\n                const hourOffset = parseInt(match[TZD_HOUR_OFFSET_GROUP]);\n\n                let minuteOffset = 0;\n                if (match[TZD_MINUTE_OFFSET_GROUP] != null) {\n                    minuteOffset = parseInt(match[TZD_MINUTE_OFFSET_GROUP]);\n                }\n\n                let offset = hourOffset * 60;\n                if (offset < 0) {\n                    offset -= minuteOffset;\n                } else {\n                    offset += minuteOffset;\n                }\n\n                components['timezoneOffset'] = offset;\n            }\n        }\n\n        return components;\n    }\n}\n\n","import {Configuration} from \"./chrono\";\n\nimport ExtractTimezoneAbbrRefiner from \"./common/refiners/ExtractTimezoneAbbrRefiner\";\nimport ExtractTimezoneOffsetRefiner from \"./common/refiners/ExtractTimezoneOffsetRefiner\";\nimport OverlapRemovalRefiner from \"./common/refiners/OverlapRemovalRefiner\";\nimport ForwardDateRefiner from \"./common/refiners/ForwardDateRefiner\";\nimport UnlikelyFormatFilter from \"./common/refiners/UnlikelyFormatFilter\";\nimport ISOFormatParser from \"./common/parsers/ISOFormatParser\";\n\nexport function includeCommonConfiguration(configuration: Configuration): Configuration {\n\n    configuration.parsers.unshift(new ISOFormatParser())\n\n    configuration.refiners.unshift(new ExtractTimezoneAbbrRefiner())\n    configuration.refiners.unshift(new ExtractTimezoneOffsetRefiner())\n    configuration.refiners.unshift(new OverlapRemovalRefiner())\n    configuration.refiners.push(new ForwardDateRefiner())\n    configuration.refiners.push(new UnlikelyFormatFilter())\n    return configuration;\n}\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {ParsingComponents, ParsingResult} from \"../../../results\";\nimport dayjs from \"dayjs\";\nimport {Meridiem} from \"../../../index\";\n\nexport default class ENCasualDateParser implements Parser {\n\n    pattern(): RegExp {\n        return /(?<=\\W|^)(now|today|tonight|last\\s*night|tomorrow|tmr|yesterday)(?=\\W|$)/i;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray): ParsingComponents | ParsingResult {\n\n        let targetDate = dayjs(context.refDate);\n        const lowerText = match[0].toLowerCase();\n        const component = context.createParsingComponents()\n\n        if(lowerText == 'tonight'){\n            // Normally means this coming midnight\n            component.imply('hour', 22);\n            component.imply('meridiem', Meridiem.PM);\n\n        } else if (/^tomorrow|^tmr/.test(lowerText)) {\n            // Check not \"Tomorrow\" on late night\n            if(targetDate.hour() > 1) {\n                targetDate = targetDate.add(1, 'day');\n            }\n\n        } else if (/^yesterday/.test(lowerText)) {\n\n            targetDate = targetDate.add(-1, 'day');\n\n        } else if(lowerText.match(/last\\s*night/)) {\n\n            component.imply('hour', 0);\n            if (targetDate.hour() > 6) {\n                targetDate = targetDate.add(-1, 'day');\n            }\n\n        } else if (lowerText.match(\"now\")) {\n            component.assign('hour', targetDate.hour());\n            component.assign('minute', targetDate.minute());\n            component.assign('second', targetDate.second());\n            component.assign('millisecond', targetDate.millisecond());\n        }\n\n        component.assign('day', targetDate.date())\n        component.assign('month', targetDate.month() + 1)\n        component.assign('year', targetDate.year())\n        return component;\n    }\n}","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {Meridiem} from \"../../../index\";\n\nexport default class ENCasualTimeParser implements Parser {\n\n    pattern() { return /(?<=\\W|^)(?:this)?\\s*(morning|afternoon|evening|night|noon)(?=\\W|$)/i; }\n\n    extract(context: ParsingContext, match: RegExpMatchArray) {\n        const component = context.createParsingComponents()\n        switch (match[1].toLowerCase()) {\n\n            case 'afternoon':\n                component.imply('meridiem', Meridiem.PM);\n                component.imply('hour', 15);\n                break;\n\n            case 'evening':\n            case 'night':\n                component.imply('meridiem', Meridiem.PM);\n                component.imply('hour', 20);\n                break;\n\n            case 'morning':\n                component.imply('meridiem', Meridiem.AM);\n                component.imply('hour', 6);\n                break;\n\n            case 'noon':\n                component.imply('meridiem', Meridiem.AM);\n                component.imply('hour', 12);\n                break;\n        }\n\n        return component;\n    }\n}\n","import {Parser, ParsingContext} from \"../../../chrono\";\nimport {ParsingComponents} from \"../../../results\";\nimport {WEEKDAY_DICTIONARY} from \"../constants\";\nimport dayjs, {Dayjs} from \"dayjs\";\nimport {matchAnyPattern} from \"../../../utils/pattern\";\n\nconst PATTERN = new RegExp('(?<=\\\\W|^)' +\n    '(?:(?:\\\\,|\\\\(|\\\\（)\\\\s*)?' +\n    '(?:on\\\\s*?)?' +\n    '(?:(this|last|past|next)\\\\s*)?' +\n    `(${matchAnyPattern(WEEKDAY_DICTIONARY)})` +\n    '(?:\\\\s*(?:\\\\,|\\\\)|\\\\）))?' +\n    '(?:\\\\s*(this|last|past|next)\\\\s*week)?' +\n    '(?=\\\\W|$)', 'i');\n\nconst PREFIX_GROUP = 1;\nconst WEEKDAY_GROUP = 2;\nconst POSTFIX_GROUP = 3;\n\nexport default class ENWeekdayParser implements Parser {\n\n    pattern(): RegExp {\n        return PATTERN;\n    }\n\n    extract(context: ParsingContext, match: RegExpMatchArray): ParsingComponents {\n\n        const dayOfWeek = match[WEEKDAY_GROUP].toLowerCase();\n        const offset = WEEKDAY_DICTIONARY[dayOfWeek];\n        if (offset === undefined) {\n            return null;\n        }\n\n        const prefix = match[PREFIX_GROUP];\n        const postfix = match[POSTFIX_GROUP];\n        let modifier = prefix || postfix;\n        modifier = modifier || '';\n        modifier = modifier.toLowerCase();\n\n        const date = this.extractWeekday(context.refDate, offset, modifier);\n        return context.createParsingComponents()\n            .assign('weekday', offset)\n            .imply('day', date.date())\n            .imply('month', date.month() + 1)\n            .imply('year', date.year());\n    }\n\n    private extractWeekday(refDate: Date, offset, modifier?: string) : Dayjs {\n        let date = dayjs(refDate);\n        const refOffset = date.day();\n\n        if(modifier == 'last' || modifier == 'past') {\n            date = date.day(offset - 7);\n        } else if(modifier == 'next') {\n            date = date.day(offset + 7);\n        } else if(modifier == 'this') {\n            date = date.day(offset);\n        } else {\n            if (Math.abs(offset - 7 - refOffset) < Math.abs(offset - refOffset)) {\n                date = date.day(offset - 7);\n            } else if (Math.abs(offset + 7 - refOffset) < Math.abs(offset - refOffset)) {\n                date = date.day(offset + 7);\n            } else {\n                date = date.day(offset);\n            }\n        }\n\n        return date;\n    }\n}\n","import {NUMBER_PATTERN, parseNumberPattern} from \"../constants\";\nimport {Parser, ParsingContext} from \"../../../chrono\";\nimport {ParsingComponents} from \"../../../results\";\nimport dayjs from \"dayjs\";\n\n\nconst PATTERN = new RegExp('(?<=\\\\W|^)' +\n    '(this|next|last|past)\\\\s*' +\n    `(${NUMBER_PATTERN})?\\\\s*` +\n    '(seconds?|min(?:ute)?s?|hours?|days?|weeks?|months?|years?)(?=\\\\s*)' +\n    '(?=\\\\W|$)', 'i'\n);\n\nconst MODIFIER_WORD_GROUP = 1;\nconst MULTIPLIER_WORD_GROUP = 2;\nconst RELATIVE_WORD_GROUP = 3;\n\nexport default class ENRelativeDateFormatParser implements Parser {\n\n    pattern(): RegExp {return PATTERN; }\n    extract(context: ParsingContext, match: RegExpMatchArray): ParsingComponents {\n        if (match[MODIFIER_WORD_GROUP].toLowerCase().match(/^this/)) {\n            if (match[MULTIPLIER_WORD_GROUP]) {\n                return null;\n            }\n\n            return this.extractThisReference(context, match[RELATIVE_WORD_GROUP]);\n        }\n\n        const modifier = match[MODIFIER_WORD_GROUP].toLowerCase().match(/^next/) ? 1 : -1;\n        const parsedNum = match[MULTIPLIER_WORD_GROUP] ? parseNumberPattern(match[MULTIPLIER_WORD_GROUP]) : 1;\n        const unitWord = match[RELATIVE_WORD_GROUP].toLowerCase()\n\n        if (unitWord.match(/day|week|month|year/i)) {\n            return this.extractDateReference(context, unitWord, parsedNum * modifier);\n        } else {\n            return this.extractTimeReference(context, unitWord, parsedNum * modifier)\n        }\n    }\n\n    extractTimeReference(context: ParsingContext, timeUnitWord: string, num: number) {\n        const components = context.createParsingComponents()\n        let date = dayjs(context.refDate);\n\n        if (timeUnitWord.match(/hour/i)) {\n\n            date = date.add(num, 'hour');\n            components.imply('minute', date.minute());\n            components.imply('second', date.second());\n\n        } else if (timeUnitWord.match(/min/i)) {\n\n            date = date.add(num, 'minute');\n            components.assign('minute', date.minute());\n            components.imply('second', date.second());\n\n        } else if (timeUnitWord.match(/second/i)) {\n\n            date = date.add(num, 'second');\n            components.assign('second', date.second());\n            components.assign('minute', date.minute());\n        }\n\n        components.assign('hour', date.hour());\n        components.assign('year', date.year());\n        components.assign('month', date.month() + 1);\n        components.assign('day', date.date());\n\n        return components;\n    }\n\n    extractDateReference(context: ParsingContext, dateUnitWord: string, num: number) {\n        const components = context.createParsingComponents()\n        let date = dayjs(context.refDate);\n\n        if (dateUnitWord.match(/day/i)) {\n            date = date.add(num, 'd');\n            components.assign('year', date.year());\n            components.assign('month', date.month() + 1);\n            components.assign('day', date.date());\n        } else if (dateUnitWord.match(/week/i)) {\n            date = date.add(num * 7, 'd');\n            // We don't know the exact date for next/last week so we imply them\n            components.imply('day', date.date());\n            components.imply('month', date.month() + 1);\n            components.imply('year', date.year());\n        } else if (dateUnitWord.match(/month/i)) {\n            date = date.add(num, 'month');\n            // We don't know the exact day for next/last month\n            components.imply('day', date.date());\n            components.assign('year', date.year());\n            components.assign('month', date.month() + 1);\n        } else if (dateUnitWord.match(/year/i)) {\n            date = date.add(num, 'year');\n            // We don't know the exact day for month on next/last year\n            components.imply('day', date.date());\n            components.imply('month', date.month() + 1);\n            components.assign('year', date.year());\n        }\n\n        return components;\n    }\n\n    extractThisReference(context: ParsingContext, relativeWord: string) {\n        const components = context.createParsingComponents()\n        let date = dayjs(context.refDate);\n\n        // This week\n        if (relativeWord.match(/week/i)) {\n            date = date.add(-date.get('d'), 'd');\n            components.imply('day', date.date());\n            components.imply('month', date.month() + 1);\n            components.imply('year', date.year());\n        }\n\n        // This month\n        else if (relativeWord.match(/month/i)) {\n            date = date.add(-date.date() + 1, 'd');\n            components.imply('day', date.date());\n            components.assign('year', date.year());\n            components.assign('month', date.month() + 1);\n        }\n\n        // This year\n        else if (relativeWord.match(/year/i)) {\n            date = date.add(-date.date() + 1, 'd');\n            date = date.add(-date.month(), 'month');\n\n            components.imply('day', date.date());\n            components.imply('month', date.month() + 1);\n            components.assign('year', date.year());\n        }\n\n        return components;\n    }\n}\n","\n\nimport ENTimeUnitDeadlineFormatParser from \"./parsers/ENTimeUnitDeadlineFormatParser\";\nimport ENMonthNameLittleEndianParser from \"./parsers/ENMonthNameLittleEndianParser\";\nimport ENMonthNameMiddleEndianParser from \"./parsers/ENMonthNameMiddleEndianParser\";\nimport ENMonthNameParser from \"./parsers/ENMonthNameParser\";\nimport ENSlashDateFormatParser from \"./parsers/ENSlashDateFormatParser\";\nimport ENSlashDateFormatStartWithYearParser from \"./parsers/ENSlashDateFormatStartWithYearParser\";\nimport ENSlashMonthFormatParser from \"./parsers/ENSlashMonthFormatParser\";\nimport ENTimeExpressionParser from \"./parsers/ENTimeExpressionParser\";\nimport ENTimeUnitAgoFormatParser from \"./parsers/ENTimeUnitAgoFormatParser\";\nimport ENTimeUnitLaterFormatParser from \"./parsers/ENTimeUnitLaterFormatParser\";\nimport ENMergeDateRangeRefiner from \"./refiners/ENMergeDateRangeRefiner\";\nimport ENMergeDateTimeRefiner from \"./refiners/ENMergeDateTimeRefiner\";\n\nimport {includeCommonConfiguration} from \"../../configurations\";\nimport ENCasualDateParser from \"./parsers/ENCasualDateParser\";\nimport ENCasualTimeParser from \"./parsers/ENCasualTimeParser\";\nimport ENWeekdayParser from \"./parsers/ENWeekdayParser\";\nimport ENRelativeDateFormatParser from \"./parsers/ENRelativeDateFormatParser\";\n\nimport {ParsedResult, ParsingOption} from \"../../index\";\nimport {Chrono, Configuration} from \"../../chrono\";\n\n// Shortcuts\nexport const casual = new Chrono(createCasualConfiguration(false))\nexport const strict = new Chrono(createConfiguration(true, false))\n\nexport const GB = new Chrono(createConfiguration(false, true))\n\nexport function parse(text: string, ref?: Date, option?: ParsingOption): ParsedResult[] {\n    return casual.parse(text, ref, option);\n}\n\nexport function parseDate(text: string, ref?: Date, option?: ParsingOption) : Date {\n    return casual.parseDate(text, ref, option);\n}\n\nexport function createCasualConfiguration(littleEndian = false) : Configuration {\n    const option = createConfiguration(false, littleEndian);\n    option.parsers.unshift(new ENCasualDateParser());\n    option.parsers.unshift(new ENCasualTimeParser());\n    option.parsers.unshift(new ENWeekdayParser());\n    option.parsers.unshift(new ENRelativeDateFormatParser());\n    return option;\n}\n\nexport function createConfiguration(strictMode= true, littleEndian = false) : Configuration {\n    return includeCommonConfiguration({\n        parsers: [\n            new ENTimeUnitDeadlineFormatParser(strictMode),\n            new ENMonthNameLittleEndianParser(),\n            new ENMonthNameMiddleEndianParser(),\n            new ENMonthNameParser(),\n            new ENSlashDateFormatParser(littleEndian),\n            new ENSlashDateFormatStartWithYearParser(),\n            new ENSlashMonthFormatParser(),\n            new ENTimeExpressionParser(),\n            new ENTimeUnitAgoFormatParser(strictMode),\n            new ENTimeUnitLaterFormatParser(strictMode),\n        ],\n        refiners: [\n            new ENMergeDateTimeRefiner(),\n            new ENMergeDateRangeRefiner()\n        ]\n    });\n}\n","import {ParsingComponents, ParsingResult} from \"./results\";\nimport {Component, ParsedResult, ParsingOption} from \"./index\";\nimport {AsyncDebugBlock, DebugHandler} from \"./debugging\";\nimport {createCasualConfiguration} from './locales/en';\n\nexport interface Configuration {\n    parsers: Parser[],\n    refiners: Refiner[]\n}\n\nexport interface Parser {\n    pattern: (context: ParsingContext) => RegExp,\n    extract: (context: ParsingContext, match: RegExpMatchArray) =>\n        (ParsingComponents | ParsingResult | {[c: Component]: string|number} | null)\n}\n\nexport interface Refiner {\n    refine: (context: ParsingContext, results: ParsingResult[]) => ParsingResult[]\n}\n\nexport class Chrono {\n    parsers: Array<Parser>\n    refiners: Array<Refiner>\n\n    constructor(configuration?: Configuration) {\n        configuration = configuration || createCasualConfiguration();\n        this.parsers = [...configuration.parsers];\n        this.refiners = [...configuration.refiners];\n    }\n\n    parseDate(text, refDate, opt): Date {\n        const results = this.parse(text, refDate, opt);\n        return (results.length > 0) ? results[0].start.date() : null;\n    }\n\n    parse(text: string, refDate?: Date, opt?: ParsingOption): ParsedResult[] {\n        const context = new ParsingContext(text,\n            refDate || new Date(),\n            opt || {})\n\n        let results = [];\n        this.parsers.forEach((parser) => {\n            const parsedResults = Chrono.executeParser(context, parser);\n            results = results.concat(parsedResults);\n        });\n\n        results.sort((a, b) => {\n            return a.index - b.index;\n        });\n\n        this.refiners.forEach(function (refiner) {\n            results = refiner.refine(context, results);\n        });\n\n        return results;\n    }\n\n    clone() : Chrono{\n        return new Chrono({\n            parsers: [...this.parsers],\n            refiners: [...this.refiners]\n        })\n    }\n\n    private static executeParser(context: ParsingContext, parser: Parser) {\n        const results = [];\n        const pattern = parser.pattern(context);\n\n        const originalText = context.text;\n        let remainingText = context.text;\n        let match = pattern.exec(remainingText);\n\n        while (match) {\n\n            // Calculate match index on the full text;\n            const index = match.index + originalText.length - remainingText.length\n            match.index = index;\n\n            const result = parser.extract(context, match);\n            if (!result) {\n                // If fail, move on by 1\n                remainingText = originalText.substring(index + 1);\n                match = pattern.exec(remainingText);\n                continue;\n            }\n\n            let parsedResult: ParsingResult = null;\n            if (result instanceof ParsingResult) {\n                parsedResult = result;\n            } else if (result instanceof ParsingComponents) {\n                parsedResult = context.createParsingResult(index, match[0])\n                parsedResult.start = result\n            } else {\n                parsedResult = context.createParsingResult(index, match[0], result)\n            }\n            '09/25/2017 10:31:50.522 P'\n\n            context.debug(() =>\n                console.log(`${parser.constructor.name} extracted result ${parsedResult}`))\n\n            results.push(parsedResult);\n            remainingText = originalText.substring(index + parsedResult.text.length);\n            match = pattern.exec(remainingText);\n        }\n\n        return results;\n    }\n}\n\nexport class ParsingContext implements DebugHandler {\n    constructor(\n        readonly text: string,\n        readonly refDate: Date,\n        readonly option: ParsingOption\n    ) {}\n\n    createParsingComponents(components?: {[c: Component]: string|number}) : ParsingComponents {\n        return new ParsingComponents(this.refDate, components)\n    }\n\n    createParsingResult(\n        index: number, textOrEndIndex: number | string,\n        startComponents?: {[c: Component]: string|number},\n        endComponents?: {[c: Component]: string|number}\n    ) : ParsingResult {\n\n        const text = (typeof textOrEndIndex === 'string') ? textOrEndIndex :\n            this.text.substring(index, textOrEndIndex)\n\n        const start = startComponents ? this.createParsingComponents(startComponents) : null\n        const end = endComponents ? this.createParsingComponents(endComponents) : null\n\n        return new ParsingResult(this.refDate, index, text, start, end)\n    }\n\n    debug(block: AsyncDebugBlock): void {\n        if (this.option.debug) {\n            if (this.option.debug instanceof Function) {\n                this.option.debug(block)\n            } else {\n                const handler: DebugHandler = <DebugHandler>this.option.debug;\n                handler.debug(block)\n            }\n        }\n    }\n}\n"],"sourceRoot":""}